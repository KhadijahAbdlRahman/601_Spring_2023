{
  "hash": "8fe9e3d2f479d8952cfd840083092e41",
  "result": {
    "markdown": "---\ntitle: \"Challenge 2\"\nauthor: \"Matt Eckstein\"\ndesription: \"Challenge 2 - Matt Eckstein - Railroad Data\"\ndate: \"03/01/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n\n  - challenge_2\n  - Matt Eckstein\n  - railroad_2012_clean_county.csv\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nknitr::opts_chunk$set(echo = TRUE)\n```\n:::\n\n\n\nLoading and viewing dataset  \n\n\n::: {.cell}\n\n```{.r .cell-code}\nrailroad_data <- read.csv(\"_data/railroad_2012_clean_county.csv\")\n\nhead(railroad_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  state               county total_employees\n1    AE                  APO               2\n2    AK            ANCHORAGE               7\n3    AK FAIRBANKS NORTH STAR               2\n4    AK               JUNEAU               3\n5    AK    MATANUSKA-SUSITNA               2\n6    AK                SITKA               1\n```\n:::\n\n```{.r .cell-code}\nsummarize(railroad_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ndata frame with 0 columns and 1 row\n```\n:::\n:::\n\n\nThese data were likely gathered from a survey of occupations across geographies conducted by a federal agency such as the Bureau of Labor Statistics.\n\nEach case is a county in the United States with at least one railroad worker. (The state and county columns are both essential for defining a case, since some county names occur in more than one state, and the state column is necessary for disambiguation.) The total_employees column indicates the number of railroad employees in the relevant county.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrailroad_data %>%\n  summarize(median = median(total_employees), mean = mean(total_employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  median     mean\n1     21 87.17816\n```\n:::\n:::\n\n\nOf US counties with at least one railroad employee, the median county had 21 railroad employees, while the mean county had slightly more than 87. This suggests that a handful of counties with very large numbers of railroad employees are dragging the mean upwards relative to more typical counties.\n\n##Railroad workers by state\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstates <- select(railroad_data, state)\ntable(states)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nstates\n AE  AK  AL  AP  AR  AZ  CA  CO  CT  DC  DE  FL  GA  HI  IA  ID  IL  IN  KS  KY \n  1   6  67   1  72  15  55  57   8   1   3  67 152   3  99  36 103  92  95 119 \n LA  MA  MD  ME  MI  MN  MO  MS  MT  NC  ND  NE  NH  NJ  NM  NV  NY  OH  OK  OR \n 63  12  24  16  78  86 115  78  53  94  49  89  10  21  29  12  61  88  73  33 \n PA  RI  SC  SD  TN  TX  UT  VA  VT  WA  WI  WV  WY \n 65   5  46  52  91 221  25  92  14  39  69  53  22 \n```\n:::\n\n```{.r .cell-code}\nprop.table(table(states))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nstates\n          AE           AK           AL           AP           AR           AZ \n0.0003412969 0.0020477816 0.0228668942 0.0003412969 0.0245733788 0.0051194539 \n          CA           CO           CT           DC           DE           FL \n0.0187713311 0.0194539249 0.0027303754 0.0003412969 0.0010238908 0.0228668942 \n          GA           HI           IA           ID           IL           IN \n0.0518771331 0.0010238908 0.0337883959 0.0122866894 0.0351535836 0.0313993174 \n          KS           KY           LA           MA           MD           ME \n0.0324232082 0.0406143345 0.0215017065 0.0040955631 0.0081911263 0.0054607509 \n          MI           MN           MO           MS           MT           NC \n0.0266211604 0.0293515358 0.0392491468 0.0266211604 0.0180887372 0.0320819113 \n          ND           NE           NH           NJ           NM           NV \n0.0167235495 0.0303754266 0.0034129693 0.0071672355 0.0098976109 0.0040955631 \n          NY           OH           OK           OR           PA           RI \n0.0208191126 0.0300341297 0.0249146758 0.0112627986 0.0221843003 0.0017064846 \n          SC           SD           TN           TX           UT           VA \n0.0156996587 0.0177474403 0.0310580205 0.0754266212 0.0085324232 0.0313993174 \n          VT           WA           WI           WV           WY \n0.0047781570 0.0133105802 0.0235494881 0.0180887372 0.0075085324 \n```\n:::\n:::\n\nAmong all states and state-equivalents, the number of counties and county-equivalents that have at least one railroad worker ranges from one (in Washington, DC and each of the two military entities) to 221 (in Texas). This is roughly commensurate with what one might expect, given the overall number of counties in each state. About 7.5% of all counties and county-equivalents that have at least one railroad worker are in Texas. (Although the overall impact is small, note that the data in the proportional table are slightly distorted by the fact that the table aggregates railroad worker data for all of Virginia's independent cities as one entry rather than breaking them out as separate county-equivalents.)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrailroad_data %>%\n  select(state, county)%>%\n  n_distinct()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 2930\n```\n:::\n:::\n\nThis shows that there are 2390 cases (consisting of state-county combinations) in the data\n\n## Grouping by state and finding mean and median both overall and for counties within them\n\nNote that the function mfv() used to calculate the mode to find these summary statistics is part of the package modeest. I ran install.packages(\"modeest\") in my console rather than adding it to the Quarto document in order to avoid causing an unwanted install on the computer of someone else running the code in the Quarto document.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(modeest)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRegistered S3 method overwritten by 'rmutil':\n  method         from\n  print.response httr\n```\n:::\n\n```{.r .cell-code}\nrailroad_data %>%\n  summarize(mean(total_employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  mean(total_employees)\n1              87.17816\n```\n:::\n\n```{.r .cell-code}\nrailroad_data %>%\n  summarize(median(total_employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  median(total_employees)\n1                      21\n```\n:::\n\n```{.r .cell-code}\nrailroad_data %>%\n  summarize(mfv(total_employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  mfv(total_employees)\n1                    1\n```\n:::\n\n```{.r .cell-code}\nrailroad_data %>%\n  summarize(min(total_employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  min(total_employees)\n1                    1\n```\n:::\n\n```{.r .cell-code}\nrailroad_data %>%\n  summarize(max(total_employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  max(total_employees)\n1                 8207\n```\n:::\n\n```{.r .cell-code}\nrailroad_data %>%\n  summarize(IQR(total_employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  IQR(total_employees)\n1                   58\n```\n:::\n\n```{.r .cell-code}\nrailroad_data %>%\n  group_by(state) %>%\n  summarize(mean(total_employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 53 x 2\n   state `mean(total_employees)`\n   <chr>                   <dbl>\n 1 AE                        2  \n 2 AK                       17.2\n 3 AL                       63.5\n 4 AP                        1  \n 5 AR                       53.8\n 6 AZ                      210. \n 7 CA                      239. \n 8 CO                       64.0\n 9 CT                      324  \n10 DC                      279  \n# ... with 43 more rows\n```\n:::\n\n```{.r .cell-code}\nrailroad_data %>%\n  group_by(state) %>%\n  summarize(median(total_employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 53 x 2\n   state `median(total_employees)`\n   <chr>                     <dbl>\n 1 AE                          2  \n 2 AK                          2.5\n 3 AL                         26  \n 4 AP                          1  \n 5 AR                         16.5\n 6 AZ                         94  \n 7 CA                         61  \n 8 CO                         10  \n 9 CT                        125  \n10 DC                        279  \n# ... with 43 more rows\n```\n:::\n\n```{.r .cell-code}\nrailroad_data %>%\n  group_by(state) %>%\n  summarize(mfv(total_employees))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Returning more (or less) than 1 row per `summarise()` group was deprecated in\ndplyr 1.1.0.\ni Please use `reframe()` instead.\ni When switching from `summarise()` to `reframe()`, remember that `reframe()`\n  always returns an ungrouped data frame and adjust accordingly.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'state'. You can override using the\n`.groups` argument.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 165 x 2\n# Groups:   state [53]\n   state `mfv(total_employees)`\n   <chr>                  <int>\n 1 AE                         2\n 2 AK                         2\n 3 AL                         7\n 4 AL                        11\n 5 AP                         1\n 6 AR                         5\n 7 AZ                         3\n 8 AZ                        10\n 9 AZ                        18\n10 AZ                        37\n# ... with 155 more rows\n```\n:::\n\n```{.r .cell-code}\nrailroad_data %>%\n  group_by(state) %>%\n  summarize(sd(total_employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 53 x 2\n   state `sd(total_employees)`\n   <chr>                 <dbl>\n 1 AE                     NA  \n 2 AK                     34.8\n 3 AL                    130. \n 4 AP                     NA  \n 5 AR                    131. \n 6 AZ                    228. \n 7 CA                    549. \n 8 CO                    128. \n 9 CT                    520. \n10 DC                     NA  \n# ... with 43 more rows\n```\n:::\n\n```{.r .cell-code}\nrailroad_data %>%\n  group_by(state) %>%\n  summarize(min(total_employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 53 x 2\n   state `min(total_employees)`\n   <chr>                  <int>\n 1 AE                         2\n 2 AK                         1\n 3 AL                         1\n 4 AP                         1\n 5 AR                         1\n 6 AZ                         3\n 7 CA                         1\n 8 CO                         1\n 9 CT                        26\n10 DC                       279\n# ... with 43 more rows\n```\n:::\n\n```{.r .cell-code}\nrailroad_data %>%\n  group_by(state) %>%\n  summarize(max(total_employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 53 x 2\n   state `max(total_employees)`\n   <chr>                  <int>\n 1 AE                         2\n 2 AK                        88\n 3 AL                       990\n 4 AP                         1\n 5 AR                       972\n 6 AZ                       749\n 7 CA                      2888\n 8 CO                       553\n 9 CT                      1561\n10 DC                       279\n# ... with 43 more rows\n```\n:::\n\n```{.r .cell-code}\nrailroad_data %>%\n  group_by(state) %>%\n  summarize(IQR(total_employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 53 x 2\n   state `IQR(total_employees)`\n   <chr>                  <dbl>\n 1 AE                       0  \n 2 AK                       4  \n 3 AL                      47  \n 4 AP                       0  \n 5 AR                      33.8\n 6 AZ                     296  \n 7 CA                     188  \n 8 CO                      39  \n 9 CT                     167. \n10 DC                       0  \n# ... with 43 more rows\n```\n:::\n:::\n\n\n\n\n\n## Explaining and interpreting the above\nI chose to calculate the measures of central tendency and dispersion for the total results and grouped by state. I considered a county (within states, to prevent counting counties in different states with the same name together) subgroup, but did not include it when I realized this produced the same results as overall analysis, since each county (within a state) has only one value.\n\nI found it notable how much the mean number of railroad workers per county varies by state. Some of this variation is accounted for by the fact that some states (e.g. California) have relatively few counties for the size of their populations and thus have many people (and, hence, railroad workers) in each county. Other states, such as the Dakotas, which have many counties relative to the sizes of their populations, do not have many railroad workers in their average county. Some interesting factors cause variation in this general pattern, though. Some states, such as Hawaii, do not have very railroad-friendly geography and have fewer railroad workers per county than one might otherwise expect. Also, Nebraska stands out as a bit of an outlier on the high side relative to other relatively lightly populated Midwestern states with large numbers of counties, in part since Omaha is a significant railroad hub (https://www.greatamericanstations.com/stations/omaha-ne-oma/).\n\nIt's also notable that some states have a different number of railroad employees in every county with at least one, creating a large number of modes for some states.\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}