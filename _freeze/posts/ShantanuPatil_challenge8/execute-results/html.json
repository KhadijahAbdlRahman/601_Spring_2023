{
  "hash": "7156e2e7a5bc0932c769628558f7cc19",
  "result": {
    "markdown": "---\ntitle: \"Challenge 8: SNL Cast Analysis\"\nauthor: \"Shantanu Patil\"\ndescription: \"Data Joining and Analysis on SNL Cast Information\"\ndate: \"05/13/2023\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_8\n  - snl\n\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(lubridate)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n\n\n## Read in data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nSNL_actors <- read_csv(\"_data/snl_actors.csv\")\nSNL_casts <- read_csv(\"_data/snl_casts.csv\")\nSNL_seasons <- read_csv(\"_data/snl_seasons.csv\")\n```\n:::\n\n\n### Briefly describe the data\nThis dataset comprises three tables about the actors and seasons of SNL, a late-night comedy show which was once hosted by one of my favorite standup comedians, Norm Macdonald. The first table, actors, gives each actor's name, gender, and cast type. The second table, casts, shows the relationship between an actor and the seasons in which they featured. It also includes how many episodes of the season they appeared in, as well as some statistical data. The third table, seasons, gives information on each season's year, number of episodes, and episode ids. Casts describes the relationship between the two tables of entities, while actor and seasons include entries that reflect one entity.\n\n## Tidy Data (as needed)\n\nThe data needs no further preprocessing.\n\n\n## Join Data\nTo merge the datasets, we must consider the common keys. The casts and seasons datasets share the sid (season ID) column, whereas casts and actors share the aid (actor ID) column. We will first integrate the additional data from the actors dataset into the casts dataset, enabling us to analyze the genders of the actors. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a new dataframe for 'cast' roles only from actors dataset\ncast_actors <- SNL_actors %>%\n       select(-url) %>%\n       filter(type == \"cast\")  # Filters out all roles except 'cast'\n\n# Count number of distinct actors in casts dataset\nnum_unique_actors <- SNL_casts %>%\n      pull(aid) %>%\n      unique() %>%\n      length()  # Returns number of unique actors\n\n# Merge cast_actors and casts datasets using 'aid' as the key\nmerged_casts <- merge(cast_actors, SNL_casts, by = \"aid\") %>%\n        select(aid, gender, sid, featured, update_anchor)\n\n\nprint(num_unique_actors)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 156\n```\n:::\n:::\n\nWith this integrated data, we can now conduct analyses on the gender distribution throughout seasons as well as the gender representation among weekend update hosts.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Join the datasets and create a new column 'gender_male'\ngender_counts <- merged_casts %>%\n    left_join(SNL_seasons, by = 'sid') %>%\n    mutate(gender_male = gender == 'male') %>%\n    select(sid, year, gender, gender_male, featured) %>%\n    group_by(year, gender_male) %>%\n    summarise(total_featured = sum(featured))\n\nhead(gender_counts, 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 3\n# Groups:   year [2]\n   year gender_male total_featured\n  <dbl> <lgl>                <int>\n1  1975 FALSE                    0\n2  1975 TRUE                     0\n3  1976 FALSE                    0\n```\n:::\n\n```{.r .cell-code}\n# Calculate the total counts per season\nseason_counts <- merged_casts %>%\n    left_join(SNL_seasons, by = 'sid') %>%\n    mutate(gender_male = gender == 'male') %>%\n    select(sid, year, gender, gender_male, featured) %>%\n    group_by(year) %>%\n    summarise(total_featured = sum(featured))\n\nhead(season_counts, 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n   year total_featured\n  <dbl>          <int>\n1  1975              0\n2  1976              0\n3  1977              2\n```\n:::\n\n```{.r .cell-code}\n# Calculate the gender ratio\ngender_ratio <- gender_counts %>%\n    left_join(season_counts, by = 'year') %>%\n    mutate(featured_ratio = total_featured.x / total_featured.y)\n\nhead(gender_ratio, 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 5\n# Groups:   year [2]\n   year gender_male total_featured.x total_featured.y featured_ratio\n  <dbl> <lgl>                  <int>            <int>          <dbl>\n1  1975 FALSE                      0                0            NaN\n2  1975 TRUE                       0                0            NaN\n3  1976 FALSE                      0                0            NaN\n```\n:::\n\n```{.r .cell-code}\n# Plot the data\nggplot(gender_ratio, aes(x = year, y = featured_ratio, col = gender_male)) +\n    geom_bar(position = \"stack\", stat = \"identity\") +\n    ggtitle('Ratio of Male to Non-Male Cast Members on SNL') +\n    labs(x = 'Year', y = 'Ratio of Male to Non-Male', color = 'b')\n```\n\n::: {.cell-output-display}\n![](ShantanuPatil_challenge8_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\nAs we can see, the gender gap is shrinking year after year.\n",
    "supporting": [
      "ShantanuPatil_challenge8_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}
