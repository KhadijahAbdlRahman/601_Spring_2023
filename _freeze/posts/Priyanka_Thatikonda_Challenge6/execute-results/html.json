{
  "hash": "558ae2b2714e9301ab73a2735a2abe70",
  "result": {
    "markdown": "---\ntitle: \"Challenge 6_PriyankaThatikonda\"\nauthor: \"Meredith Rolfe\"\ndescription: \"Visualizing Time and Relationships\"\ndate: \"08/23/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_6\n  - hotel_bookings\n  - air_bnb\n  - fed_rate\n  - debt\n  - usa_households\n  - abc_poll\neditor: \n  markdown: \n    wrap: 72\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(lubridate)\n\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in a data set, and describe the data set using both words and\n    any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  mutate variables as needed (including sanity checks)\n4)  create at least one graph including time (evolution)\n\n-   try to make them \"publication\" ready (optional)\n-   Explain why you choose the specific graph type\n\n5)  Create at least one graph depicting part-whole or flow relationships\n\n-   try to make them \"publication\" ready (optional)\n-   Explain why you choose the specific graph type\n\n[R Graph Gallery](https://r-graph-gallery.com/) is a good starting point\nfor thinking about what information is conveyed in standard graph types,\nand includes example R code.\n\n(be sure to only include the category tags for the data you use!)\n\n## Read in data\n\nRead in one (or more) of the following datasets, using the correct R\npackage and command.\n\n-   debt ⭐\n-   fed_rate ⭐⭐\n-   abc_poll ⭐⭐⭐\n-   usa_hh ⭐⭐⭐\n-   hotel_bookings ⭐⭐⭐⭐\n-   AB_NYC ⭐⭐⭐⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  df <- read.csv(\"_data/hotel_bookings.csv\")\n  head(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         hotel is_canceled lead_time arrival_date_year arrival_date_month\n1 Resort Hotel           0       342              2015               July\n2 Resort Hotel           0       737              2015               July\n3 Resort Hotel           0         7              2015               July\n4 Resort Hotel           0        13              2015               July\n5 Resort Hotel           0        14              2015               July\n6 Resort Hotel           0        14              2015               July\n  arrival_date_week_number arrival_date_day_of_month stays_in_weekend_nights\n1                       27                         1                       0\n2                       27                         1                       0\n3                       27                         1                       0\n4                       27                         1                       0\n5                       27                         1                       0\n6                       27                         1                       0\n  stays_in_week_nights adults children babies meal country market_segment\n1                    0      2        0      0   BB     PRT         Direct\n2                    0      2        0      0   BB     PRT         Direct\n3                    1      1        0      0   BB     GBR         Direct\n4                    1      1        0      0   BB     GBR      Corporate\n5                    2      2        0      0   BB     GBR      Online TA\n6                    2      2        0      0   BB     GBR      Online TA\n  distribution_channel is_repeated_guest previous_cancellations\n1               Direct                 0                      0\n2               Direct                 0                      0\n3               Direct                 0                      0\n4            Corporate                 0                      0\n5                TA/TO                 0                      0\n6                TA/TO                 0                      0\n  previous_bookings_not_canceled reserved_room_type assigned_room_type\n1                              0                  C                  C\n2                              0                  C                  C\n3                              0                  A                  C\n4                              0                  A                  A\n5                              0                  A                  A\n6                              0                  A                  A\n  booking_changes deposit_type agent company days_in_waiting_list customer_type\n1               3   No Deposit  NULL    NULL                    0     Transient\n2               4   No Deposit  NULL    NULL                    0     Transient\n3               0   No Deposit  NULL    NULL                    0     Transient\n4               0   No Deposit   304    NULL                    0     Transient\n5               0   No Deposit   240    NULL                    0     Transient\n6               0   No Deposit   240    NULL                    0     Transient\n  adr required_car_parking_spaces total_of_special_requests reservation_status\n1   0                           0                         0          Check-Out\n2   0                           0                         0          Check-Out\n3  75                           0                         0          Check-Out\n4  75                           0                         0          Check-Out\n5  98                           0                         1          Check-Out\n6  98                           0                         1          Check-Out\n  reservation_status_date\n1              2015-07-01\n2              2015-07-01\n3              2015-07-02\n4              2015-07-02\n5              2015-07-03\n6              2015-07-03\n```\n:::\n:::\n\n\n### Briefly describe the data\n\nThe dataset consists of 119,390 entries related to hotel bookings. It\nincludes diverse information such as arrival date (year, month, day),\nhotel type, cancellation status, lead time, duration of stay, number of\nadults, children, and babies, meal preferences, country of origin,\nmarket segment, distribution channel, previous cancellations, reserved\nand assigned room types, booking changes, deposit type, days on the\nwaiting list, customer type, average daily rate, required car parking\nspaces, and total number of special requests.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 119390     32\n```\n:::\n\n```{.r .cell-code}\ncolnames(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"hotel\"                          \"is_canceled\"                   \n [3] \"lead_time\"                      \"arrival_date_year\"             \n [5] \"arrival_date_month\"             \"arrival_date_week_number\"      \n [7] \"arrival_date_day_of_month\"      \"stays_in_weekend_nights\"       \n [9] \"stays_in_week_nights\"           \"adults\"                        \n[11] \"children\"                       \"babies\"                        \n[13] \"meal\"                           \"country\"                       \n[15] \"market_segment\"                 \"distribution_channel\"          \n[17] \"is_repeated_guest\"              \"previous_cancellations\"        \n[19] \"previous_bookings_not_canceled\" \"reserved_room_type\"            \n[21] \"assigned_room_type\"             \"booking_changes\"               \n[23] \"deposit_type\"                   \"agent\"                         \n[25] \"company\"                        \"days_in_waiting_list\"          \n[27] \"customer_type\"                  \"adr\"                           \n[29] \"required_car_parking_spaces\"    \"total_of_special_requests\"     \n[31] \"reservation_status\"             \"reservation_status_date\"       \n```\n:::\n:::\n\n\n## Tidy Data (as needed)\n\nIs your data already tidy, or is there work to be done? Be sure to\nanticipate your end result to provide a sanity check, and document your\nwork here.\n\nTo visualize the number of bookings that occurred in 2015 for five\ncountries (USA, BEL, GBR, DEU, FRA) across different months, a new\ncolumn can be created to represent the total number of bookings\ncombining all age group bookings. This allows us to observe the\nvariation in booking numbers based on seasons or specific months in each\ncountry. To achieve this, the month and year can be aggregated to form a\nnew date column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  df <- df %>% \n  mutate(date_year = paste0(arrival_date_month,\" \",arrival_date_day_of_month,\" \",arrival_date_year))\ndf$date_year %>% head()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"July 1 2015\" \"July 1 2015\" \"July 1 2015\" \"July 1 2015\" \"July 1 2015\"\n[6] \"July 1 2015\"\n```\n:::\n:::\n\n\nAre there any variables that require mutation to be usable in your\nanalysis stream? For example, do you need to calculate new values in\norder to graph them? Can string values be represented numerically? Do\nyou need to turn any variables into factors and reorder for ease of\ngraphics and visualization?\n\nDocument your work here.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf1<-data\n```\n:::\n\n\n## Time Dependent Visualization\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  filter(arrival_date_year == 2015) %>%\n  count(arrival_date_month, hotel) %>%\n  ggplot(aes(x = arrival_date_month, y = n, fill = hotel)) +\n  geom_col(position = \"dodge\") +\n  labs(x = \"Month\", y = \"Total Bookings\", title = \"Monthly bookings by hotel\") +\n  scale_fill_manual(values = c(\"#4f79a7\", \"#f28d2c\"), \n                    name = \"Hotel\", \n                    labels = c(\"City Hotel\", \"Resort Hotel\"))\n```\n\n::: {.cell-output-display}\n![](Priyanka_Thatikonda_Challenge6_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n## Visualizing Part-Whole Relationships\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  select(arrival_date_month, days_in_waiting_list) %>%\n  group_by(arrival_date_month) %>%\n  summarise(max_days_in_waiting_list = max(days_in_waiting_list)) %>%\n  mutate(month = make_date(year = 2021, month = match(arrival_date_month, month.name))) %>%\n  ggplot(aes(month, max_days_in_waiting_list)) +\n  geom_line() +\n  scale_x_date(date_labels = \"%B\", date_breaks = \"1 month\") +\n  labs(title = \"Days in WL per month\")\n```\n\n::: {.cell-output-display}\n![](Priyanka_Thatikonda_Challenge6_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "Priyanka_Thatikonda_Challenge6_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}