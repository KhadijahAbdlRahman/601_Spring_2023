{
  "hash": "501bdeabd54dd71dbde28638e67b6919",
  "result": {
    "markdown": "---\ntitle: \"Challenge 4\"\nauthor: \"Janani Natarajan\"\ndesription: \"More data wrangling: pivoting\"\ndate: \"05/08/23\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_4\n  - abc_poll\n  - eggs\n  - fed_rates\n  - hotel_bookings\n  - debt\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Read in data\n\nRead in one (or more) of the following datasets, using the correct R package and command.\n\n-   abc_poll.csv ⭐\n-   poultry_tidy.xlsx or organiceggpoultry.xls⭐⭐\n-   FedFundsRate.csv⭐⭐⭐\n-   hotel_bookings.csv⭐⭐⭐⭐\n-   debt_in_trillions.xlsx ⭐⭐⭐⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndebt_t <- readxl::read_excel(\"_data/debt_in_trillions.xlsx\", sheet=\"Sheet1\")\ntable(select(debt_t, `Year and Quarter`))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nYear and Quarter\n03:Q1 03:Q2 03:Q3 03:Q4 04:Q1 04:Q2 04:Q3 04:Q4 05:Q1 05:Q2 05:Q3 05:Q4 06:Q1 \n    1     1     1     1     1     1     1     1     1     1     1     1     1 \n06:Q2 06:Q3 06:Q4 07:Q1 07:Q2 07:Q3 07:Q4 08:Q1 08:Q2 08:Q3 08:Q4 09:Q1 09:Q2 \n    1     1     1     1     1     1     1     1     1     1     1     1     1 \n09:Q3 09:Q4 10:Q1 10:Q2 10:Q3 10:Q4 11:Q1 11:Q2 11:Q3 11:Q4 12:Q1 12:Q2 12:Q3 \n    1     1     1     1     1     1     1     1     1     1     1     1     1 \n12:Q4 13:Q1 13:Q2 13:Q3 13:Q4 14:Q1 14:Q2 14:Q3 14:Q4 15:Q1 15:Q2 15:Q3 15:Q4 \n    1     1     1     1     1     1     1     1     1     1     1     1     1 \n16:Q1 16:Q2 16:Q3 16:Q4 17:Q1 17:Q2 17:Q3 17:Q4 18:Q1 18:Q2 18:Q3 18:Q4 19:Q1 \n    1     1     1     1     1     1     1     1     1     1     1     1     1 \n19:Q2 19:Q3 19:Q4 20:Q1 20:Q2 20:Q3 20:Q4 21:Q1 21:Q2 \n    1     1     1     1     1     1     1     1     1 \n```\n:::\n:::\n\n\n### Briefly describe the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nview(debt_t)\nncol(debt_t)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 8\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnrow(debt_t)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 74\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnrow(debt_t) * (ncol(debt_t)-1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 518\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndebt_t2 <- debt_t %>%\n  pivot_longer(col = -c(`Year and Quarter`), names_to=\"debt_type\", values_to = \"debt_value\")\n```\n:::\n\n\n## Identify variables that need to be mutated\n\nThe Year and Quarter variable has to be mutated to make analysis more efficient. Since Year and Quarter denotes a date or time, this is not right and needs to be converted to Date object.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(lubridate)\ndebt_t3 <- debt_t2 %>%\n  mutate(year = str_c(\"20\", str_sub(`Year and Quarter`, 1, 2)),quarter = str_sub(`Year and Quarter`, 5, 5), year_and_quarter = quarter(as_date(str_c(year, quarter), format=\"%Y%q\"), with_year=TRUE)) %>% \n  select(-c(`Year and Quarter`, `year`, `quarter`)) %>%\n  relocate(debt_type, debt_value, year_and_quarter) %>%\n  mutate(debt_value = str_remove(as.character(debt_value), \".0+$\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(debt_t3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 3\n  debt_type    debt_value year_and_quarter\n  <chr>        <chr>                 <dbl>\n1 Mortgage     4.942                 2003.\n2 HE Revolving 0.242                 2003.\n3 Auto Loan    0.641                 2003.\n4 Credit Card  0.688                 2003.\n5 Student Loan 0.2407                2003.\n6 Other        0.4776                2003.\n```\n:::\n:::\n",
    "supporting": [
      "Janani_Natarajan_Challenge_4_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}