{
  "hash": "d4b63c162245765e019de497e89315ae",
  "result": {
    "markdown": "---\ntitle: \"Challenge 3\"\nauthor: \"Matthew Weiner\"\ndescription: \"Tidy Data: Pivoting\"\ndate: \"03/24/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_3\n  - animal_weights\n  - Matthew_Weiner\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1.  read in a data set, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2.  identify what needs to be done to tidy the current data\n3.  anticipate the shape of pivoted data\n4.  pivot the data into tidy format using `pivot_longer`\n\n## Read in data\n\nRead in one (or more) of the following datasets, using the correct R package and command.\n\n-   animal_weights.csv ‚≠ê\n-   eggs_tidy.csv ‚≠ê‚≠ê or organiceggpoultry.xls ‚≠ê‚≠ê‚≠ê\n-   australian_marriage\\*.xls ‚≠ê‚≠ê‚≠ê\n-   USA Households\\*.xlsx ‚≠ê‚≠ê‚≠ê‚≠ê\n-   sce_labor_chart_data_public.xlsx üåüüåüüåüüåüüåü\n\n## Introduction\n\nFor this challenge, I chose to investigate the `animal_weights` dataset.\n\n## Getting Started\n\nFirst I had to import the necesary package in order to read the file. Then, in order to get an idea of what the data contained, I used the `head()` command to output the first few rows of the dataset and used the `colnnames()` command to view all column names. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\naw <- read_csv(\"_data/animal_weight.csv\")\nhead(aw)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 √ó 17\n  IPCC A‚Ä¶¬π Cattl‚Ä¶¬≤ Cattl‚Ä¶¬≥ Buffa‚Ä¶‚Å¥ Swine‚Ä¶‚Åµ Swine‚Ä¶‚Å∂ Chick‚Ä¶‚Å∑ Chick‚Ä¶‚Å∏ Ducks Turkeys\n  <chr>      <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <dbl>   <dbl>\n1 Indian ‚Ä¶     275     110     295      28      28     0.9     1.8   2.7     6.8\n2 Eastern‚Ä¶     550     391     380      50     180     0.9     1.8   2.7     6.8\n3 Africa       275     173     380      28      28     0.9     1.8   2.7     6.8\n4 Oceania      500     330     380      45     180     0.9     1.8   2.7     6.8\n5 Western‚Ä¶     600     420     380      50     198     0.9     1.8   2.7     6.8\n6 Latin A‚Ä¶     400     305     380      28      28     0.9     1.8   2.7     6.8\n# ‚Ä¶ with 7 more variables: Sheep <dbl>, Goats <dbl>, Horses <dbl>, Asses <dbl>,\n#   Mules <dbl>, Camels <dbl>, Llamas <dbl>, and abbreviated variable names\n#   ¬π‚Äã`IPCC Area`, ¬≤‚Äã`Cattle - dairy`, ¬≥‚Äã`Cattle - non-dairy`, ‚Å¥‚ÄãBuffaloes,\n#   ‚Åµ‚Äã`Swine - market`, ‚Å∂‚Äã`Swine - breeding`, ‚Å∑‚Äã`Chicken - Broilers`,\n#   ‚Å∏‚Äã`Chicken - Layers`\n```\n:::\n\n```{.r .cell-code}\ncolnames(aw)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"IPCC Area\"          \"Cattle - dairy\"     \"Cattle - non-dairy\"\n [4] \"Buffaloes\"          \"Swine - market\"     \"Swine - breeding\"  \n [7] \"Chicken - Broilers\" \"Chicken - Layers\"   \"Ducks\"             \n[10] \"Turkeys\"            \"Sheep\"              \"Goats\"             \n[13] \"Horses\"             \"Asses\"              \"Mules\"             \n[16] \"Camels\"             \"Llamas\"            \n```\n:::\n:::\n\n\nThis preliminary investigation into the dataset has already given me a good idea of the type of data that is involved. Due to the title of the dataset, and the fact that all columns except for the first are of the type `dbl`, tells me that this dataet describes the average weight of each type of animal for each IPCC area. \n\nAfter viewing the column names, I could see that we will want to use the `pivot_longer()` command here in order to tidy up the data. The original dataset is in a wide format, where each column represents a variable, and the animal types are spread out across multiple columns. This makes it difficult to perform certain types of data analysis and visualization tasks because the data is not organized in a way that is easy to work with. \n\nBy using `pivot_longer()` we can mitigate this issue by converting the dataset to a long format where each row will be a combination of the `IPCC Area`, the `Animal` type, and the `Value` column which represents the average weight of the animals. \n\n## Pivoting Math\n\nThe original shape of the dataset is (9,17) where there are 9 rows and 17 columns. Our goal is to change this such that we will pivot all animal columns into a single column. This means all columns but `IPCC Area` will be pivoted.\nIf we let k be the number of columns, then we want to pivot k-1 columns which is equivalent to k-1 = 16. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n#existing rows\nnrow(aw)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 9\n```\n:::\n\n```{.r .cell-code}\n#existing cols\nncol(aw)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 17\n```\n:::\n\n```{.r .cell-code}\n#expected rows\nnrow(aw) * (ncol(aw)-1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 144\n```\n:::\n\n```{.r .cell-code}\n#expected col\n1+2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 3\n```\n:::\n:::\n\n\nAs we can see above, that means that the resulting shape of the pivoted dataset will be (144,3), where there are 144 rows and 3 columns. \n\n\n## Pivot the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\npivot_aw <- pivot_longer(aw,cols = -`IPCC Area`, names_to = \"Animal\", values_to = \"Value\")\n\npivot_aw\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 144 √ó 3\n   `IPCC Area`         Animal             Value\n   <chr>               <chr>              <dbl>\n 1 Indian Subcontinent Cattle - dairy     275  \n 2 Indian Subcontinent Cattle - non-dairy 110  \n 3 Indian Subcontinent Buffaloes          295  \n 4 Indian Subcontinent Swine - market      28  \n 5 Indian Subcontinent Swine - breeding    28  \n 6 Indian Subcontinent Chicken - Broilers   0.9\n 7 Indian Subcontinent Chicken - Layers     1.8\n 8 Indian Subcontinent Ducks                2.7\n 9 Indian Subcontinent Turkeys              6.8\n10 Indian Subcontinent Sheep               28  \n# ‚Ä¶ with 134 more rows\n```\n:::\n\n```{.r .cell-code}\nnrow(pivot_aw)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 144\n```\n:::\n\n```{.r .cell-code}\nncol(pivot_aw)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 3\n```\n:::\n:::\n\n\nAfter applying the `pivot_longer()` command, we can see that our hypothesis was right as there are 144 rows in this new dataset with 3 columns. The dataset is now much more readable and can more easily be used in the future for other investigative tasks. \n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}