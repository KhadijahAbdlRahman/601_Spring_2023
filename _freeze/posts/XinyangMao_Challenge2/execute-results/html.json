{
  "hash": "20ea147d049e39775f5ac78e0f6eaccf",
  "result": {
    "markdown": "---\ntitle: \"Challenge_2\"\nauthor: \"XinyangMao\"\ndescription: \"Data wrangling: using group() and summarise()\"\ndate: \"03/17/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_2\n  - XinyangMao\n  - hotel_bookings\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to\n\n1)  read in a data set, and describe the data using both words and any supporting information (e.g., tables, etc)\n2)  provide summary statistics for different interesting groups within the data, and interpret those statistics\n\n## Read in the Data\n-   hotel_bookings.csv\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- read.csv(\"_data/hotel_bookings.csv\")\ndata <- na.omit(df)\n```\n:::\n\n\nIn this challenge,I chose hotel_bookings.csv to analysis.\n\n## Describe the data\n\nWe can see that there are 119390 rows and 32 columns in this dataset.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 119386     32\n```\n:::\n:::\n\nThe structure of the data set also tells us the number of rows and columns, but it provides even more information. It tells us the column names, the class of each column (what kind of data is stored in it), and the first few observations of each variable.\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n'data.frame':\t119386 obs. of  32 variables:\n $ hotel                         : chr  \"Resort Hotel\" \"Resort Hotel\" \"Resort Hotel\" \"Resort Hotel\" ...\n $ is_canceled                   : int  0 0 0 0 0 0 0 0 1 1 ...\n $ lead_time                     : int  342 737 7 13 14 14 0 9 85 75 ...\n $ arrival_date_year             : int  2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 ...\n $ arrival_date_month            : chr  \"July\" \"July\" \"July\" \"July\" ...\n $ arrival_date_week_number      : int  27 27 27 27 27 27 27 27 27 27 ...\n $ arrival_date_day_of_month     : int  1 1 1 1 1 1 1 1 1 1 ...\n $ stays_in_weekend_nights       : int  0 0 0 0 0 0 0 0 0 0 ...\n $ stays_in_week_nights          : int  0 0 1 1 2 2 2 2 3 3 ...\n $ adults                        : int  2 2 1 1 2 2 2 2 2 2 ...\n $ children                      : int  0 0 0 0 0 0 0 0 0 0 ...\n $ babies                        : int  0 0 0 0 0 0 0 0 0 0 ...\n $ meal                          : chr  \"BB\" \"BB\" \"BB\" \"BB\" ...\n $ country                       : chr  \"PRT\" \"PRT\" \"GBR\" \"GBR\" ...\n $ market_segment                : chr  \"Direct\" \"Direct\" \"Direct\" \"Corporate\" ...\n $ distribution_channel          : chr  \"Direct\" \"Direct\" \"Direct\" \"Corporate\" ...\n $ is_repeated_guest             : int  0 0 0 0 0 0 0 0 0 0 ...\n $ previous_cancellations        : int  0 0 0 0 0 0 0 0 0 0 ...\n $ previous_bookings_not_canceled: int  0 0 0 0 0 0 0 0 0 0 ...\n $ reserved_room_type            : chr  \"C\" \"C\" \"A\" \"A\" ...\n $ assigned_room_type            : chr  \"C\" \"C\" \"C\" \"A\" ...\n $ booking_changes               : int  3 4 0 0 0 0 0 0 0 0 ...\n $ deposit_type                  : chr  \"No Deposit\" \"No Deposit\" \"No Deposit\" \"No Deposit\" ...\n $ agent                         : chr  \"NULL\" \"NULL\" \"NULL\" \"304\" ...\n $ company                       : chr  \"NULL\" \"NULL\" \"NULL\" \"NULL\" ...\n $ days_in_waiting_list          : int  0 0 0 0 0 0 0 0 0 0 ...\n $ customer_type                 : chr  \"Transient\" \"Transient\" \"Transient\" \"Transient\" ...\n $ adr                           : num  0 0 75 75 98 ...\n $ required_car_parking_spaces   : int  0 0 0 0 0 0 0 0 0 0 ...\n $ total_of_special_requests     : int  0 0 0 0 1 1 0 1 1 0 ...\n $ reservation_status            : chr  \"Check-Out\" \"Check-Out\" \"Check-Out\" \"Check-Out\" ...\n $ reservation_status_date       : chr  \"2015-07-01\" \"2015-07-01\" \"2015-07-02\" \"2015-07-02\" ...\n - attr(*, \"na.action\")= 'omit' Named int [1:4] 40601 40668 40680 41161\n  ..- attr(*, \"names\")= chr [1:4] \"40601\" \"40668\" \"40680\" \"41161\"\n```\n:::\n:::\n\n\nThe summary provides descriptive statistics including the min, max, mean, median, and quartiles of each column. For example, we can see in this data set that the mean rate of is_canaceled is 37.04% and the maximum number of baby is 10.\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    hotel            is_canceled       lead_time   arrival_date_year\n Length:119386      Min.   :0.0000   Min.   :  0   Min.   :2015     \n Class :character   1st Qu.:0.0000   1st Qu.: 18   1st Qu.:2016     \n Mode  :character   Median :0.0000   Median : 69   Median :2016     \n                    Mean   :0.3704   Mean   :104   Mean   :2016     \n                    3rd Qu.:1.0000   3rd Qu.:160   3rd Qu.:2017     \n                    Max.   :1.0000   Max.   :737   Max.   :2017     \n arrival_date_month arrival_date_week_number arrival_date_day_of_month\n Length:119386      Min.   : 1.00            Min.   : 1.0             \n Class :character   1st Qu.:16.00            1st Qu.: 8.0             \n Mode  :character   Median :28.00            Median :16.0             \n                    Mean   :27.16            Mean   :15.8             \n                    3rd Qu.:38.00            3rd Qu.:23.0             \n                    Max.   :53.00            Max.   :31.0             \n stays_in_weekend_nights stays_in_week_nights     adults      \n Min.   : 0.0000         Min.   : 0.0         Min.   : 0.000  \n 1st Qu.: 0.0000         1st Qu.: 1.0         1st Qu.: 2.000  \n Median : 1.0000         Median : 2.0         Median : 2.000  \n Mean   : 0.9276         Mean   : 2.5         Mean   : 1.856  \n 3rd Qu.: 2.0000         3rd Qu.: 3.0         3rd Qu.: 2.000  \n Max.   :19.0000         Max.   :50.0         Max.   :55.000  \n    children           babies              meal             country         \n Min.   : 0.0000   Min.   : 0.000000   Length:119386      Length:119386     \n 1st Qu.: 0.0000   1st Qu.: 0.000000   Class :character   Class :character  \n Median : 0.0000   Median : 0.000000   Mode  :character   Mode  :character  \n Mean   : 0.1039   Mean   : 0.007949                                        \n 3rd Qu.: 0.0000   3rd Qu.: 0.000000                                        \n Max.   :10.0000   Max.   :10.000000                                        \n market_segment     distribution_channel is_repeated_guest\n Length:119386      Length:119386        Min.   :0.00000  \n Class :character   Class :character     1st Qu.:0.00000  \n Mode  :character   Mode  :character     Median :0.00000  \n                                         Mean   :0.03191  \n                                         3rd Qu.:0.00000  \n                                         Max.   :1.00000  \n previous_cancellations previous_bookings_not_canceled reserved_room_type\n Min.   : 0.00000       Min.   : 0.0000                Length:119386     \n 1st Qu.: 0.00000       1st Qu.: 0.0000                Class :character  \n Median : 0.00000       Median : 0.0000                Mode  :character  \n Mean   : 0.08712       Mean   : 0.1371                                  \n 3rd Qu.: 0.00000       3rd Qu.: 0.0000                                  \n Max.   :26.00000       Max.   :72.0000                                  \n assigned_room_type booking_changes   deposit_type          agent          \n Length:119386      Min.   : 0.0000   Length:119386      Length:119386     \n Class :character   1st Qu.: 0.0000   Class :character   Class :character  \n Mode  :character   Median : 0.0000   Mode  :character   Mode  :character  \n                    Mean   : 0.2211                                        \n                    3rd Qu.: 0.0000                                        \n                    Max.   :21.0000                                        \n   company          days_in_waiting_list customer_type           adr         \n Length:119386      Min.   :  0.000      Length:119386      Min.   :  -6.38  \n Class :character   1st Qu.:  0.000      Class :character   1st Qu.:  69.29  \n Mode  :character   Median :  0.000      Mode  :character   Median :  94.59  \n                    Mean   :  2.321                         Mean   : 101.83  \n                    3rd Qu.:  0.000                         3rd Qu.: 126.00  \n                    Max.   :391.000                         Max.   :5400.00  \n required_car_parking_spaces total_of_special_requests reservation_status\n Min.   :0.00000             Min.   :0.0000            Length:119386     \n 1st Qu.:0.00000             1st Qu.:0.0000            Class :character  \n Median :0.00000             Median :0.0000            Mode  :character  \n Mean   :0.06252             Mean   :0.5713                              \n 3rd Qu.:0.00000             3rd Qu.:1.0000                              \n Max.   :8.00000             Max.   :5.0000                              \n reservation_status_date\n Length:119386          \n Class :character       \n Mode  :character       \n                        \n                        \n                        \n```\n:::\n:::\n\n## Provide Grouped Summary Statistics\n\nWe can see there are lots of variables now,we can use cor() function to show the relationships between these variables.Obviously,we can find that for arrival_date_year variables,the most related numeric variable is arrival_date_week_number.But all of the numeric variables seem don't have strong relationships.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\ndata <- select(data,-where(is.character))\ncor(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                                is_canceled     lead_time arrival_date_year\nis_canceled                     1.000000000  0.2931773844      0.0167324934\nlead_time                       0.293177384  1.0000000000      0.0400927219\narrival_date_year               0.016732493  0.0400927219      1.0000000000\narrival_date_week_number        0.008131991  0.1268848204     -0.5405663357\narrival_date_day_of_month      -0.006084131  0.0022337238     -0.0002790381\nstays_in_weekend_nights        -0.001783382  0.0856671122      0.0214888460\nstays_in_week_nights            0.024771434  0.1657994743      0.0308779571\nadults                          0.059990266  0.1195443171      0.0296741970\nchildren                        0.005047790 -0.0376216776      0.0546241639\nbabies                         -0.032488454 -0.0209179156     -0.0131971353\nis_repeated_guest              -0.084787949 -0.1244175906      0.0103318406\nprevious_cancellations          0.110140471  0.0860398385     -0.1198331083\nprevious_bookings_not_canceled -0.057355365 -0.0735521797      0.0292143485\nbooking_changes                -0.144370572  0.0001380965      0.0308552231\ndays_in_waiting_list            0.054193146  0.1700826037     -0.0565063742\nadr                             0.047622225 -0.0631259954      0.1975183834\nrequired_car_parking_spaces    -0.195492464 -0.1164605134     -0.0136989991\ntotal_of_special_requests      -0.234705902 -0.0956878275      0.1085851089\n                               arrival_date_week_number\nis_canceled                                 0.008131991\nlead_time                                   0.126884820\narrival_date_year                          -0.540566336\narrival_date_week_number                    1.000000000\narrival_date_day_of_month                   0.066823684\nstays_in_weekend_nights                     0.018209372\nstays_in_week_nights                        0.015559322\nadults                                      0.025901318\nchildren                                    0.005518419\nbabies                                      0.010396527\nis_repeated_guest                          -0.030128572\nprevious_cancellations                      0.035502291\nprevious_bookings_not_canceled             -0.020902457\nbooking_changes                             0.005511772\ndays_in_waiting_list                        0.022934739\nadr                                         0.075811103\nrequired_car_parking_spaces                 0.001923621\ntotal_of_special_requests                   0.026139352\n                               arrival_date_day_of_month\nis_canceled                                -0.0060841312\nlead_time                                   0.0022337238\narrival_date_year                          -0.0002790381\narrival_date_week_number                    0.0668236844\narrival_date_day_of_month                   1.0000000000\nstays_in_weekend_nights                    -0.0163702417\nstays_in_week_nights                       -0.0281924631\nadults                                     -0.0015394616\nchildren                                    0.0145438342\nbabies                                     -0.0002332642\nis_repeated_guest                          -0.0061516010\nprevious_cancellations                     -0.0270150357\nprevious_bookings_not_canceled             -0.0003030418\nbooking_changes                             0.0106010824\ndays_in_waiting_list                        0.0227233609\nadr                                         0.0301886003\nrequired_car_parking_spaces                 0.0086746240\ntotal_of_special_requests                   0.0030944208\n                               stays_in_weekend_nights stays_in_week_nights\nis_canceled                               -0.001783382          0.024771434\nlead_time                                  0.085667112          0.165799474\narrival_date_year                          0.021488846          0.030877957\narrival_date_week_number                   0.018209372          0.015559322\narrival_date_day_of_month                 -0.016370242         -0.028192463\nstays_in_weekend_nights                    1.000000000          0.498967239\nstays_in_week_nights                       0.498967239          1.000000000\nadults                                     0.091888610          0.092983373\nchildren                                   0.045792937          0.044202919\nbabies                                     0.018482550          0.020190920\nis_repeated_guest                         -0.087241563         -0.097247278\nprevious_cancellations                    -0.012775390         -0.013993096\nprevious_bookings_not_canceled            -0.042716302         -0.048743688\nbooking_changes                            0.063280182          0.096209580\ndays_in_waiting_list                      -0.054152569         -0.002020421\nadr                                        0.049323279          0.065219447\nrequired_car_parking_spaces               -0.018555572         -0.024860942\ntotal_of_special_requests                  0.072685999          0.068199125\n                                     adults     children        babies\nis_canceled                     0.059990266  0.005047790 -0.0324884545\nlead_time                       0.119544317 -0.037621678 -0.0209179156\narrival_date_year               0.029674197  0.054624164 -0.0131971353\narrival_date_week_number        0.025901318  0.005518419  0.0103965273\narrival_date_day_of_month      -0.001539462  0.014543834 -0.0002332642\nstays_in_weekend_nights         0.091888610  0.045792937  0.0184825497\nstays_in_week_nights            0.092983373  0.044202919  0.0201909200\nadults                          1.000000000  0.030446849  0.0181478114\nchildren                        0.030446849  1.000000000  0.0240295524\nbabies                          0.018147811  0.024029552  1.0000000000\nis_repeated_guest              -0.146424566 -0.032859382 -0.0089431363\nprevious_cancellations         -0.006735864 -0.024730099 -0.0075012826\nprevious_bookings_not_canceled -0.107982949 -0.021072490 -0.0065507062\nbooking_changes                -0.051666039  0.048948888  0.0834390248\ndays_in_waiting_list           -0.008280488 -0.033272616 -0.0106209075\nadr                             0.230690021  0.324853605  0.0291829276\nrequired_car_parking_spaces     0.014790889  0.056252847  0.0373827041\ntotal_of_special_requests       0.122854601  0.081744822  0.0978928336\n                               is_repeated_guest previous_cancellations\nis_canceled                         -0.084787949            0.110140471\nlead_time                           -0.124417591            0.086039838\narrival_date_year                    0.010331841           -0.119833108\narrival_date_week_number            -0.030128572            0.035502291\narrival_date_day_of_month           -0.006151601           -0.027015036\nstays_in_weekend_nights             -0.087241563           -0.012775390\nstays_in_week_nights                -0.097247278           -0.013993096\nadults                              -0.146424566           -0.006735864\nchildren                            -0.032859382           -0.024730099\nbabies                              -0.008943136           -0.007501283\nis_repeated_guest                    1.000000000            0.082292667\nprevious_cancellations               0.082292667            1.000000000\nprevious_bookings_not_canceled       0.418055728            0.152727847\nbooking_changes                      0.012089755           -0.026993891\ndays_in_waiting_list                -0.022235787            0.005928488\nadr                                 -0.134328457           -0.065653153\nrequired_car_parking_spaces          0.077088149           -0.018493155\ntotal_of_special_requests            0.013055449           -0.048382004\n                               previous_bookings_not_canceled booking_changes\nis_canceled                                     -0.0573553652   -0.1443705725\nlead_time                                       -0.0735521797    0.0001380965\narrival_date_year                                0.0292143485    0.0308552231\narrival_date_week_number                        -0.0209024574    0.0055117720\narrival_date_day_of_month                       -0.0003030418    0.0106010824\nstays_in_weekend_nights                         -0.0427163025    0.0632801821\nstays_in_week_nights                            -0.0487436875    0.0962095799\nadults                                          -0.1079829493   -0.0516660388\nchildren                                        -0.0210724903    0.0489488885\nbabies                                          -0.0065507062    0.0834390248\nis_repeated_guest                                0.4180557276    0.0120897552\nprevious_cancellations                           0.1527278470   -0.0269938913\nprevious_bookings_not_canceled                   1.0000000000    0.0116065130\nbooking_changes                                  0.0116065130    1.0000000000\ndays_in_waiting_list                            -0.0093973866   -0.0116354687\nadr                                             -0.0721514059    0.0196022487\nrequired_car_parking_spaces                      0.0476523637    0.0656174943\ntotal_of_special_requests                        0.0378270602    0.0528441726\n                               days_in_waiting_list         adr\nis_canceled                             0.054193146  0.04762222\nlead_time                               0.170082604 -0.06312600\narrival_date_year                      -0.056506374  0.19751838\narrival_date_week_number                0.022934739  0.07581110\narrival_date_day_of_month               0.022723361  0.03018860\nstays_in_weekend_nights                -0.054152569  0.04932328\nstays_in_week_nights                   -0.002020421  0.06521945\nadults                                 -0.008280488  0.23069002\nchildren                               -0.033272616  0.32485360\nbabies                                 -0.010620908  0.02918293\nis_repeated_guest                      -0.022235787 -0.13432846\nprevious_cancellations                  0.005928488 -0.06565315\nprevious_bookings_not_canceled         -0.009397387 -0.07215141\nbooking_changes                        -0.011635469  0.01960225\ndays_in_waiting_list                    1.000000000 -0.04076433\nadr                                    -0.040764331  1.00000000\nrequired_car_parking_spaces            -0.030601215  0.05661816\ntotal_of_special_requests              -0.082727388  0.17223837\n                               required_car_parking_spaces\nis_canceled                                   -0.195492464\nlead_time                                     -0.116460513\narrival_date_year                             -0.013698999\narrival_date_week_number                       0.001923621\narrival_date_day_of_month                      0.008674624\nstays_in_weekend_nights                       -0.018555572\nstays_in_week_nights                          -0.024860942\nadults                                         0.014790889\nchildren                                       0.056252847\nbabies                                         0.037382704\nis_repeated_guest                              0.077088149\nprevious_cancellations                        -0.018493155\nprevious_bookings_not_canceled                 0.047652364\nbooking_changes                                0.065617494\ndays_in_waiting_list                          -0.030601215\nadr                                            0.056618163\nrequired_car_parking_spaces                    1.000000000\ntotal_of_special_requests                      0.082635165\n                               total_of_special_requests\nis_canceled                                 -0.234705902\nlead_time                                   -0.095687827\narrival_date_year                            0.108585109\narrival_date_week_number                     0.026139352\narrival_date_day_of_month                    0.003094421\nstays_in_weekend_nights                      0.072685999\nstays_in_week_nights                         0.068199125\nadults                                       0.122854601\nchildren                                     0.081744822\nbabies                                       0.097892834\nis_repeated_guest                            0.013055449\nprevious_cancellations                      -0.048382004\nprevious_bookings_not_canceled               0.037827060\nbooking_changes                              0.052844173\ndays_in_waiting_list                        -0.082727388\nadr                                          0.172238374\nrequired_car_parking_spaces                  0.082635165\ntotal_of_special_requests                    1.000000000\n```\n:::\n:::\n\nAccording to the dataset,we can notice that it provide the number of adults, children and baby.Let's take a look at the relationship between the type of occupant and the month of occupancy.\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  select(arrival_date_month,children,adults,babies)%>%\n  group_by(arrival_date_month)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 119,390 × 4\n# Groups:   arrival_date_month [12]\n   arrival_date_month children adults babies\n   <chr>                 <int>  <int>  <int>\n 1 July                      0      2      0\n 2 July                      0      2      0\n 3 July                      0      1      0\n 4 July                      0      1      0\n 5 July                      0      2      0\n 6 July                      0      2      0\n 7 July                      0      2      0\n 8 July                      0      2      0\n 9 July                      0      2      0\n10 July                      0      2      0\n# … with 119,380 more rows\n```\n:::\n:::\n\nWe can use arrange(),desc(),select(),group_by() and slice() to show which months have most children guests below.\nThe result is the largest number of children be hosted in a hotel happened in July,the less time happened in September.\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  arrange(desc(children))%>%\n  select(arrival_date_month,children)%>%\n  group_by(arrival_date_month)%>%\n  slice(1)%>%\n  arrange(desc(children))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 12 × 2\n# Groups:   arrival_date_month [12]\n   arrival_date_month children\n   <chr>                 <int>\n 1 July                     10\n 2 April                     3\n 3 August                    3\n 4 December                  3\n 5 February                  3\n 6 January                   3\n 7 June                      3\n 8 March                     3\n 9 May                       3\n10 November                  3\n11 October                   3\n12 September                 2\n```\n:::\n:::\n\nSame,for adults,they're October and January.\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  arrange(desc(adults))%>%\n  select(arrival_date_month,adults)%>%\n  group_by(arrival_date_month)%>%\n  slice(1)%>%\n  arrange(desc(adults))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 12 × 2\n# Groups:   arrival_date_month [12]\n   arrival_date_month adults\n   <chr>               <int>\n 1 October                55\n 2 September              50\n 3 April                   4\n 4 August                  4\n 5 December                4\n 6 February                4\n 7 July                    4\n 8 June                    4\n 9 March                   4\n10 May                     4\n11 November                4\n12 January                 3\n```\n:::\n:::\n\nAs for babies,the maximum number happened in October too.\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  arrange(desc(babies))%>%\n  select(arrival_date_month,babies)%>%\n  group_by(arrival_date_month)%>%\n  slice(1)%>%\n  arrange(desc(babies))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 12 × 2\n# Groups:   arrival_date_month [12]\n   arrival_date_month babies\n   <chr>               <int>\n 1 January                10\n 2 October                 9\n 3 August                  2\n 4 December                2\n 5 February                2\n 6 July                    2\n 7 June                    2\n 8 March                   2\n 9 November                2\n10 September               2\n11 April                   1\n12 May                     1\n```\n:::\n:::\n\n### Explain and Interpret\nSome interesting findings are that hotel stays for adults and babies are relatively similar, with the most and least occurring in October and January, respectively, probably because October is a good month to travel and January is usually colder. For children, the highest number of children occurred in July, probably during the summer holidays.\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}