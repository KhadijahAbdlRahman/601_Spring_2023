{
  "hash": "c65799eed5a533134e4ec1f089e1c2ec",
  "result": {
    "markdown": "---\ntitle: \"Final Project: Prachiti Parkar\"\nauthor: \"Prachiti Parkar\"\ndescription: \"San Francisco Crime Data Exploration\"\ndate: \"05/19/2023\"\nformat:\n  html:\n    df-print: paged\n    toc: true\n    code-copy: true\n    code-tools: true\n    css: styles.css\ncategories:\n  - final_Project_assignment_1\n  - final_project_data_description\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n\n## Overview of the Final Project {#overview-of-the-final-project}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate)\n\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Part 1. Introduction {#describe-the-data-sets}\n\nIn this part, you should introduce the dataset(s) and your research questions.\n\n1.  Dataset(s) Introduction:\n\nThe dataset is downloaded from DataSF, which has a number of open datasets provided by the San Francisco Government.\nReference Link: https://datasf.org/opendata/ \n\nThis dataset contains incident reports filed as of January 1, 2018. \n\n2.  What questions do you like to answer with this dataset(s)?\n\nAs I delve into the dataset on the safe and unsafe parts of San Francisco, my analysis aims to uncover valuable insights regarding crime patterns and neighborhood safety. By carefully examining the available information, I will be able to address several key questions related to the city's safety dynamics. Here are some specific areas of exploration and the corresponding insights I intend to derive from the data:\n\nDistrict-wise distribution of crime: By analyzing the dataset, I will determine the distribution of crime across different districts in San Francisco. This will help identify areas that experience higher or lower crime rates, enabling a better understanding of the city's overall safety landscape.\n\nMost frequent resolutions in different districts: Through my analysis, I will identify the most common resolutions or outcomes associated with reported crimes in each district. This will shed light on the effectiveness of law enforcement efforts and the level of community safety achieved in different areas.\n\nTop crimes and their occurrence times: By examining the dataset, I will identify the most prevalent types of crimes in San Francisco and determine the timeframes during which these crimes occur most frequently. This information will assist in identifying potential patterns and trends that can inform targeted prevention and intervention strategies.\n\nCrime hotspots: Utilizing spatial analysis techniques, I will identify crime hotspots within the city. These hotspots represent specific locations or areas that exhibit a significantly higher concentration of criminal activity. Understanding these hotspots can aid in resource allocation and the implementation of targeted crime prevention measures.\n\nFrequency of crimes across months: Through temporal analysis, I will explore the frequency of reported crimes across different months. This analysis will help identify any seasonal variations or trends in criminal activity, providing insights into potential factors influencing crime rates in San Francisco throughout the year.\n\nBy addressing these questions, I aim to contribute a comprehensive understanding of the safe and unsafe parts of San Francisco, facilitating informed decision-making and promoting community safety initiatives.\n\n## Part 2. Background Study \nSan Francisco has a complex crime landscape, with challenges including property crimes, drug offenses, theft, assault, and homelessness-related issues. Analyzing crimes provides insights into patterns, hotspots, and factors influencing community safety. It helps assess the effectiveness of law enforcement strategies and prevention programs, aiding evidence-based decision-making.\n\nAnalyzing crimes in San Francisco in 2023 is crucial due to evolving post-pandemic effects, shifting social and economic factors, and the need to ensure community safety. It helps understand the impact of the pandemic, adapt strategies accordingly, and address emerging challenges. Data-driven analysis supports evidence-based decision-making, enabling targeted interventions and resource allocation for creating safer communities.\n\n## Part 3. Dataset Introduction \nThese reports are filed by officers or self-reported by members of the public through the San Francisco Police Department's online reporting system. Based on how the report was received and the sort of incident, the reports are divided into the following categories:\n\nInitial Reports: the first report filed in response to an incident.\nCoplogic Reports: incident reports submitted by members of the public using the San Francisco Police Department's online reporting system.\nVehicle Reports: any incident reports involving stolen or recovered automobiles\n\nData is added to open data once incident reports have been reviewed and approved by a supervising Sergeant or Lieutenant. Incident reports may be removed from the dataset if in compliance with court orders to seal records or for administrative purposes such as active internal affair investigations and/or criminal investigations.\n\nSince the data is huge containing 713107 columns and 35 columns, I decided to minimize my dataset to only the year 2023 which has around 30K rows. \n\n## Part 4. Dataset Description \nThis part contains both a coding and a storytelling component.\n\nIn the coding component, you should:\n\n1.  read the dataset;\n\n    -   (optional) If you have multiple dataset(s) you want to work with, you should combine these datasets at this step.\n\n    -   (optional) If your dataset is too big (for example, it contains too many variables/columns that may not be useful for your analysis), you may want to subset the data just to include the necessary variables/columns.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- read.csv(\"PrachitiParkar_FinalProjectData/Police_Department_Incident_Reports__2018_to_Present.csv\")\n\ndata = filter(data, Incident.Year == 2023)\n```\n:::\n\n\n2.  present the descriptive information of the dataset(s) using the functions in Challenges 1, 2, and 3;\n\n    -   for examples: dim(), length(unique()), head();\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    dim(data)\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    [1] 30687    35\n    ```\n    :::\n    \n    ```{.r .cell-code}\n    length(unique(data))\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    [1] 35\n    ```\n    :::\n    \n    ```{.r .cell-code}\n    head(data)\n    ```\n    \n    ::: {.cell-output-display}\n    `````{=html}\n    <div data-pagedtable=\"false\">\n      <script data-pagedtable-source type=\"application/json\">\n    {\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"Incident.Datetime\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Incident.Date\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Incident.Time\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Incident.Year\"],\"name\":[4],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"Incident.Day.of.Week\"],\"name\":[5],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Report.Datetime\"],\"name\":[6],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Row.ID\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Incident.ID\"],\"name\":[8],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"Incident.Number\"],\"name\":[9],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"CAD.Number\"],\"name\":[10],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"Report.Type.Code\"],\"name\":[11],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Report.Type.Description\"],\"name\":[12],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Filed.Online\"],\"name\":[13],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"Incident.Code\"],\"name\":[14],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"Incident.Category\"],\"name\":[15],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Incident.Subcategory\"],\"name\":[16],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Incident.Description\"],\"name\":[17],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Resolution\"],\"name\":[18],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Intersection\"],\"name\":[19],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"CNN\"],\"name\":[20],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Police.District\"],\"name\":[21],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Analysis.Neighborhood\"],\"name\":[22],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Supervisor.District\"],\"name\":[23],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"Supervisor.District.2012\"],\"name\":[24],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"Latitude\"],\"name\":[25],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Longitude\"],\"name\":[26],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Point\"],\"name\":[27],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Neighborhoods\"],\"name\":[28],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"ESNCAG...Boundary.File\"],\"name\":[29],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"Central.Market.Tenderloin.Boundary.Polygon...Updated\"],\"name\":[30],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"Civic.Center.Harm.Reduction.Project.Boundary\"],\"name\":[31],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"HSOC.Zones.as.of.2018.06.05\"],\"name\":[32],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"Invest.In.Neighborhoods..IIN..Areas\"],\"name\":[33],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"Current.Supervisor.Districts\"],\"name\":[34],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"Current.Police.Districts\"],\"name\":[35],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"3/13/23 23:41\",\"2\":\"3/13/23\",\"3\":\"23:41\",\"4\":\"2023\",\"5\":\"Monday\",\"6\":\"3/13/23 23:41\",\"7\":\"1.25374e+11\",\"8\":\"1253736\",\"9\":\"230167874\",\"10\":\"NA\",\"11\":\"VS\",\"12\":\"Vehicle Supplement\",\"13\":\"NA\",\"14\":\"7041\",\"15\":\"Recovered Vehicle\",\"16\":\"Recovered Vehicle\",\"17\":\"Vehicle, Recovered, Auto\",\"18\":\"Open or Active\",\"19\":\"\",\"20\":\"NA\",\"21\":\"Out of SF\",\"22\":\"\",\"23\":\"NA\",\"24\":\"NA\",\"25\":\"NA\",\"26\":\"NA\",\"27\":\"\",\"28\":\"NA\",\"29\":\"NA\",\"30\":\"NA\",\"31\":\"NA\",\"32\":\"NA\",\"33\":\"NA\",\"34\":\"NA\",\"35\":\"NA\",\"_rn_\":\"1\"},{\"1\":\"3/1/23 5:02\",\"2\":\"3/1/23\",\"3\":\"5:02\",\"4\":\"2023\",\"5\":\"Wednesday\",\"6\":\"3/11/23 15:40\",\"7\":\"1.25380e+11\",\"8\":\"1253795\",\"9\":\"236046151\",\"10\":\"NA\",\"11\":\"II\",\"12\":\"Coplogic Initial\",\"13\":\"TRUE\",\"14\":\"6374\",\"15\":\"Larceny Theft\",\"16\":\"Larceny Theft - Other\",\"17\":\"Theft, Other Property, >$950\",\"18\":\"Open or Active\",\"19\":\"\",\"20\":\"NA\",\"21\":\"Mission\",\"22\":\"\",\"23\":\"NA\",\"24\":\"NA\",\"25\":\"NA\",\"26\":\"NA\",\"27\":\"\",\"28\":\"NA\",\"29\":\"NA\",\"30\":\"NA\",\"31\":\"NA\",\"32\":\"NA\",\"33\":\"NA\",\"34\":\"NA\",\"35\":\"NA\",\"_rn_\":\"2\"},{\"1\":\"3/13/23 13:16\",\"2\":\"3/13/23\",\"3\":\"13:16\",\"4\":\"2023\",\"5\":\"Monday\",\"6\":\"3/13/23 13:17\",\"7\":\"1.25357e+11\",\"8\":\"1253571\",\"9\":\"220343896\",\"10\":\"NA\",\"11\":\"VS\",\"12\":\"Vehicle Supplement\",\"13\":\"NA\",\"14\":\"7041\",\"15\":\"Recovered Vehicle\",\"16\":\"Recovered Vehicle\",\"17\":\"Vehicle, Recovered, Auto\",\"18\":\"Open or Active\",\"19\":\"\",\"20\":\"NA\",\"21\":\"Out of SF\",\"22\":\"\",\"23\":\"NA\",\"24\":\"NA\",\"25\":\"NA\",\"26\":\"NA\",\"27\":\"\",\"28\":\"NA\",\"29\":\"NA\",\"30\":\"NA\",\"31\":\"NA\",\"32\":\"NA\",\"33\":\"NA\",\"34\":\"NA\",\"35\":\"NA\",\"_rn_\":\"3\"},{\"1\":\"3/13/23 10:59\",\"2\":\"3/13/23\",\"3\":\"10:59\",\"4\":\"2023\",\"5\":\"Monday\",\"6\":\"3/13/23 11:00\",\"7\":\"1.25355e+11\",\"8\":\"1253551\",\"9\":\"230174885\",\"10\":\"NA\",\"11\":\"VS\",\"12\":\"Vehicle Supplement\",\"13\":\"NA\",\"14\":\"7041\",\"15\":\"Recovered Vehicle\",\"16\":\"Recovered Vehicle\",\"17\":\"Vehicle, Recovered, Auto\",\"18\":\"Open or Active\",\"19\":\"\",\"20\":\"NA\",\"21\":\"Out of SF\",\"22\":\"\",\"23\":\"NA\",\"24\":\"NA\",\"25\":\"NA\",\"26\":\"NA\",\"27\":\"\",\"28\":\"NA\",\"29\":\"NA\",\"30\":\"NA\",\"31\":\"NA\",\"32\":\"NA\",\"33\":\"NA\",\"34\":\"NA\",\"35\":\"NA\",\"_rn_\":\"4\"},{\"1\":\"3/14/23 18:44\",\"2\":\"3/14/23\",\"3\":\"18:44\",\"4\":\"2023\",\"5\":\"Tuesday\",\"6\":\"3/14/23 18:45\",\"7\":\"1.25402e+11\",\"8\":\"1254024\",\"9\":\"230176728\",\"10\":\"NA\",\"11\":\"VS\",\"12\":\"Vehicle Supplement\",\"13\":\"NA\",\"14\":\"7041\",\"15\":\"Recovered Vehicle\",\"16\":\"Recovered Vehicle\",\"17\":\"Vehicle, Recovered, Auto\",\"18\":\"Open or Active\",\"19\":\"\",\"20\":\"NA\",\"21\":\"Out of SF\",\"22\":\"\",\"23\":\"NA\",\"24\":\"NA\",\"25\":\"NA\",\"26\":\"NA\",\"27\":\"\",\"28\":\"NA\",\"29\":\"NA\",\"30\":\"NA\",\"31\":\"NA\",\"32\":\"NA\",\"33\":\"NA\",\"34\":\"NA\",\"35\":\"NA\",\"_rn_\":\"5\"},{\"1\":\"2/15/23 3:00\",\"2\":\"2/15/23\",\"3\":\"3:00\",\"4\":\"2023\",\"5\":\"Wednesday\",\"6\":\"3/11/23 16:55\",\"7\":\"1.25379e+11\",\"8\":\"1253786\",\"9\":\"236046123\",\"10\":\"NA\",\"11\":\"II\",\"12\":\"Coplogic Initial\",\"13\":\"TRUE\",\"14\":\"6372\",\"15\":\"Larceny Theft\",\"16\":\"Larceny Theft - Other\",\"17\":\"Theft, Other Property, $50-$200\",\"18\":\"Open or Active\",\"19\":\"\",\"20\":\"NA\",\"21\":\"Mission\",\"22\":\"\",\"23\":\"NA\",\"24\":\"NA\",\"25\":\"NA\",\"26\":\"NA\",\"27\":\"\",\"28\":\"NA\",\"29\":\"NA\",\"30\":\"NA\",\"31\":\"NA\",\"32\":\"NA\",\"33\":\"NA\",\"34\":\"NA\",\"35\":\"NA\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n      </script>\n    </div>\n    `````\n    :::\n    :::\n\n\n3.  conduct summary statistics of the dataset(s); especially show the basic statistics (min, max, mean, median, etc.) for the variables you are interested in.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n Incident.Datetime  Incident.Date      Incident.Time      Incident.Year \n Length:30687       Length:30687       Length:30687       Min.   :2023  \n Class :character   Class :character   Class :character   1st Qu.:2023  \n Mode  :character   Mode  :character   Mode  :character   Median :2023  \n                                                          Mean   :2023  \n                                                          3rd Qu.:2023  \n                                                          Max.   :2023  \n                                                                        \n Incident.Day.of.Week Report.Datetime        Row.ID           Incident.ID     \n Length:30687         Length:30687       Min.   :1.230e+11   Min.   :1229913  \n Class :character     Class :character   1st Qu.:1.238e+11   1st Qu.:1238439  \n Mode  :character     Mode  :character   Median :1.246e+11   Median :1245767  \n                                         Mean   :1.246e+11   Mean   :1245693  \n                                         3rd Qu.:1.253e+11   3rd Qu.:1252958  \n                                         Max.   :1.261e+11   Max.   :1261142  \n                                                                              \n Incident.Number       CAD.Number        Report.Type.Code  \n Min.   :        0   Min.   :172441963   Length:30687      \n 1st Qu.:230065057   1st Qu.:230250554   Class :character  \n Median :230133182   Median :230470081   Mode  :character  \n Mean   :230836666   Mean   :230585208                     \n 3rd Qu.:230201488   3rd Qu.:230682186                     \n Max.   :239000443   Max.   :999999999                     \n                     NA's   :6454                          \n Report.Type.Description Filed.Online   Incident.Code   Incident.Category \n Length:30687            Mode:logical   Min.   : 1000   Length:30687      \n Class :character        TRUE:5475      1st Qu.: 6244   Class :character  \n Mode  :character        NA's:25212     Median : 7041   Mode  :character  \n                                        Mean   :24104                     \n                                        3rd Qu.:28160                     \n                                        Max.   :75030                     \n                                                                          \n Incident.Subcategory Incident.Description  Resolution       \n Length:30687         Length:30687         Length:30687      \n Class :character     Class :character     Class :character  \n Mode  :character     Mode  :character     Mode  :character  \n                                                             \n                                                             \n                                                             \n                                                             \n Intersection            CNN           Police.District    Analysis.Neighborhood\n Length:30687       Min.   :20013000   Length:30687       Length:30687         \n Class :character   1st Qu.:23917000   Class :character   Class :character     \n Mode  :character   Median :24924000   Mode  :character   Mode  :character     \n                    Mean   :25209532                                           \n                    3rd Qu.:26412000                                           \n                    Max.   :51541000                                           \n                    NA's   :1600                                               \n Supervisor.District Supervisor.District.2012    Latitude       Longitude     \n Min.   : 1.000      Min.   : 1.000           Min.   :37.71   Min.   :-122.5  \n 1st Qu.: 3.000      1st Qu.: 3.000           1st Qu.:37.75   1st Qu.:-122.4  \n Median : 6.000      Median : 6.000           Median :37.78   Median :-122.4  \n Mean   : 5.993      Mean   : 6.048           Mean   :37.77   Mean   :-122.4  \n 3rd Qu.: 9.000      3rd Qu.: 9.000           3rd Qu.:37.79   3rd Qu.:-122.4  \n Max.   :11.000      Max.   :11.000           Max.   :37.83   Max.   :-122.4  \n NA's   :1616        NA's   :1605             NA's   :1600    NA's   :1600    \n    Point           Neighborhoods    ESNCAG...Boundary.File\n Length:30687       Min.   :  1.00   Min.   :1             \n Class :character   1st Qu.: 22.00   1st Qu.:1             \n Mode  :character   Median : 50.00   Median :1             \n                    Mean   : 53.62   Mean   :1             \n                    3rd Qu.: 86.00   3rd Qu.:1             \n                    Max.   :117.00   Max.   :1             \n                    NA's   :2081     NA's   :30410         \n Central.Market.Tenderloin.Boundary.Polygon...Updated\n Min.   :1                                           \n 1st Qu.:1                                           \n Median :1                                           \n Mean   :1                                           \n 3rd Qu.:1                                           \n Max.   :1                                           \n NA's   :26308                                       \n Civic.Center.Harm.Reduction.Project.Boundary HSOC.Zones.as.of.2018.06.05\n Min.   :1                                    Min.   :1.000              \n 1st Qu.:1                                    1st Qu.:1.000              \n Median :1                                    Median :3.000              \n Mean   :1                                    Mean   :2.259              \n 3rd Qu.:1                                    3rd Qu.:3.000              \n Max.   :1                                    Max.   :5.000              \n NA's   :26584                                NA's   :24573              \n Invest.In.Neighborhoods..IIN..Areas Current.Supervisor.Districts\n Mode:logical                        Min.   : 1.000              \n NA's:30687                          1st Qu.: 3.000              \n                                     Median : 8.000              \n                                     Mean   : 6.759              \n                                     3rd Qu.:10.000              \n                                     Max.   :11.000              \n                                     NA's   :1605                \n Current.Police.Districts\n Min.   : 1.00           \n 1st Qu.: 3.00           \n Median : 5.00           \n Mean   : 4.94           \n 3rd Qu.: 7.00           \n Max.   :10.00           \n NA's   :1621            \n```\n:::\n:::\n\n\nStorytelling:\n\nThe description of each column is -\n\nIncident Datetime: The date and time when the incident occurred.\n\nIncident Date: The date the incident occurred.\n\nIncident Time: The time the incident occurred.\n\nIncident Year: The year the incident occurred.\n\nIncident Day of Week: The day of the week when the incident occurred.\n\nReport Datetime: The date and time when the report was filed.\n\nRow ID: A unique identifier for each row of data in the dataset.\n\nIncident ID: A system-generated identifier for incident reports.\n\nIncident Number: The number issued on the report, used to reference cases and report documents.\n\nCAD Number: The Computer Aided Dispatch number, assigned by the Department of Emergency Management.\n\nReport Type Code: A system code for different types of reports.\n\nReport Type Description: The description of the report type.\n\nFiled Online: Indicates if the report was filed online using a self-service reporting system.\n\nIncident Code: System codes that describe the type of incident.\n\nIncident Category: A category mapped to the incident code for statistical and reporting purposes.\n\nIncident Subcategory: A subcategory mapped to the incident code for statistical and reporting purposes.\n\nIncident Description: A description of the incident corresponding to the incident code.\n\nResolution: The resolution of the incident at the time of the report.\n\nIntersection: The names of the intersecting streets closest to the incident location.\n\nCNN: A unique identifier for the intersection.\n\nPolice District: The police district where the incident occurred.\n\nAnalysis Neighborhood: The neighborhood where each incident occurred.\n\nSupervisor District: The geographic district represented by a member of the Board of Supervisors.\n\nLatitude: The latitude coordinate of the incident location.\n\nLongitude: The longitude coordinate of the incident location.\n\nPoint: The geolocation of the incident in OGC WKT format.\n\nAmong these, I am going to concentrate on location and time specific columns. To be precice, I am using Police.District, Resolution,  Incident.Day.of.Week, Latitude, and Longitude. All of these are non-metered data. \nI also plan to add additional columns Incident.Hour and Incident.Month so that I can identify the most unsafe times and to check if the crime rate depends on month respectively.\n\nLet's understand the non metered data i.e Resolution and Police.District.\n\n::: {.cell}\n\n```{.r .cell-code}\nresolution_types<- n_distinct(data$Resolution)\n\ncat(\"Number of resolution types in this data: \", resolution_types)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nNumber of resolution types in this data:  4\n```\n:::\n\n```{.r .cell-code}\nresolution_types_names <- unique(data$Resolution)\nprint(resolution_types_names)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Open or Active\"       \"Cite or Arrest Adult\" \"Unfounded\"           \n[4] \"Exceptional Adult\"   \n```\n:::\n\n```{.r .cell-code}\ndistricts_counts<- n_distinct(data$Police.District)\n\ncat(\"Number of districts in this data: \", districts_counts)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nNumber of districts in this data:  11\n```\n:::\n\n```{.r .cell-code}\ndistricts <- unique(data$Police.District)\nprint(districts)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"Out of SF\"  \"Mission\"    \"Central\"    \"Park\"       \"Bayview\"   \n [6] \"Richmond\"   \"Southern\"   \"Northern\"   \"Tenderloin\" \"Taraval\"   \n[11] \"Ingleside\" \n```\n:::\n:::\n\n\n## Part 5. Analysis Plan \nQ: Briefly describe what data analyses (**please the special note on statistics in the next section)** and visualizations you plan to conduct to answer the research questions you proposed above.\n\nI plan to plot some line graphs, bar graphs, heatmaps and use various visualization tools to answer the research questions. \n\n  The district wise distribution of crime - I plan to plot a bar graph to show safe and unsafe districts - the tallest bar would be the one has the highest amount of crimes (unsafe) and the shortest would be the one which has the least amount of crimes. (safe)\n  \n  What is the most frequent resolution in different districts - I plan to plot compound bar graph to show various resolutions in each district, this would be a further deep down than the first plot. The larger proportion of the bar would point to highest number of crimes with that resolution. \n  \n  What are the top crimes and what time does it occur - I plan to plot bar graphs and heat maps for this question. \n  \n  What are the crime hotspots - I plan to use the map of San Francisco from get_statemap() library and then accordingly plot the crimes at the respective longitude and latitude. \n  \n  Frequency of count of crimes across months- I plan to plot line graph/ bar graph (depending on better visual appearance) showing the crimes across months. \n  \n## Part 6. Descriptive Statistics \n\nQ: Explain why you choose to conduct these specific data analyses and visualizations. In other words, how do such types of statistics or graphs (see [the R Gallery](https://r-graph-gallery.com/)) help you answer specific questions? For example, how can a bivariate visualization reveal the relationship between two variables, or how does a linear graph of variables over time present the pattern of development?\n\n  The district wise distribution of crime - This will help us figure out the most unsafe and safe districts.\n     \n  What is the most frequent resolution in different districts - This would help us understand most and least adopted resolutions to deal with crimes.\n     \n  What are the top crimes and what time does it occur - This will help us identify the most unsafe times - day or night and this can help the police increase & tighten security during that time to prevent crimes.\n     \n  What are the crime hotspots - The San Francisco state map with the crimes plot will help us locate most unsafe cities in the state and can help the police department to tighten security there. \n     \n  Frequency of count of crimes across months - Plotting a line/bar graph will help us understand the most unsafe months and we can according correlate it with inflation/recession and develop insights.\n\nQ:If you plan to conduct specific data analyses and visualizations, describe how do you need to process and prepare the tidy data.\n\n    -   What do you need to do to mutate the datasets (convert date data, create a new variable, pivot the data format, etc.)?\n\n    -   How are you going to deal with the missing data/NAs and outliers? And why do you choose this way to deal with NAs?\n    \n\n::: {.cell}\n\n```{.r .cell-code}\nany_na <- any(is.na(data))\nprint(any_na)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] TRUE\n```\n:::\n:::\n\nThis tells us that there is NA in our data.Let's check if NA exists in the columns we are going to use to perform analysis.\n\n::: {.cell}\n\n```{.r .cell-code}\nany_na <- any(is.na(data$Police.District))\nprint(any_na)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] FALSE\n```\n:::\n\n```{.r .cell-code}\nany_na <- any(is.na(data$Resolution))\nprint(any_na)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] FALSE\n```\n:::\n\n```{.r .cell-code}\nany_na <- any(is.na(data$Incident.Hour))\nprint(any_na)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] FALSE\n```\n:::\n\n```{.r .cell-code}\nany_na <- any(is.na(data$Incident.Day.of.Week))\nprint(any_na)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] FALSE\n```\n:::\n\n```{.r .cell-code}\nany_na <- any(is.na(data$Longitude))\nprint(any_na)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] TRUE\n```\n:::\n\n```{.r .cell-code}\nany_na <- any(is.na(data$Latitude))\nprint(any_na)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] TRUE\n```\n:::\n:::\n\n\nThis tells us that there is missing data for the columns Latitude and Longitude. I believe these rows would still give important information such as District and the time which we need for our analysis so I won't remove this data. \n\nI have already filtered the data to focus on the year 2023 since the data is huge and processing so many rows will take some time. \nI also plan to mutate and add additional columns like months from the date column during the preprocessing step so that it will make it easier to plot graphs. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data %>%\n  separate('Incident.Time',c('Incident.Hour','Incident.Minute'),sep = \":\")\n\ndata$Incident.Date <- as.Date(data$Incident.Date, format = \"%m/%d/%y\")\n\ndata <- data %>% \n  mutate(Incident.Month = month(Incident.Date, label = T))\n```\n:::\n\n\nI have divided the time component into hour and minute so that I can answer the my 3rd research question about the time of crime in an effective manner. \n\nSimilarly, I have added another month so that I can answer the fifth question related to the distribution of crimes across months in an effective way.\n\n\n\n## Part 7. Analysis and Visualizations\n\n#Q1: District wise distribution of crime\n\nThis plot is about total crimes across districts in the same time period. This helps us understand which are safe and unsafe districts in the city of San Francisco. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ncrime_per_district <- data %>% \n  group_by(Police.District) %>% \n  summarise(n = n())\n\ncolnames(crime_per_district) <- c(\"Police.District\", \"Total\")\nhead(crime_per_district )\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Police.District\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Total\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Bayview\",\"2\":\"3051\"},{\"1\":\"Central\",\"2\":\"4642\"},{\"1\":\"Ingleside\",\"2\":\"2429\"},{\"1\":\"Mission\",\"2\":\"3585\"},{\"1\":\"Northern\",\"2\":\"4074\"},{\"1\":\"Out of SF\",\"2\":\"906\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\ng <- ggplot(crime_per_district, aes(Police.District, Total))\ng + geom_bar(stat=\"identity\", width = 0.5, fill=\"red\") + \n      labs(title=\"District-wise distribution of crime in San Francisco\", \n           subtitle=\"2023\", \n           caption=\" Total crime in each district\") +\n      theme(axis.text.x = element_text(angle=45, vjust=1))\n```\n\n::: {.cell-output-display}\n![](PrachitiParkar_finalproject_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nWe can see Central District is the most unsafe and Park is the most safe district. We also have some data outside of SF city but this won't be a clear representation of all cities outside of SF, so I chose to ignore this information but still show it on the plot. \n\n#Q2: Most frequent resolution in different districts\n\nLet's dive deeper and understand among the districts and understand the type of crimes taking place. This plot is a stacked bar chart which shows the types of resolutions in every district.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ng <- ggplot(data, aes(Police.District))\ng + geom_bar(aes(fill=Resolution), width = 0.5) + \n  theme(axis.text.x = element_text(angle=45,vjust=1)) +\n  labs(title=\"Resolution in each District\", \n     )\n```\n\n::: {.cell-output-display}\n![](PrachitiParkar_finalproject_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nWe can see that Open or Active resolution is the highest in almost every district compared to other resolutions.\n\n#Q3: Analysis of Top Crimes and Their Occurrence Time\n\n#a) Hourly Crime Distribution\n\nWe can create a dataframe by grouping by Incident Hour.\n\nLet's now understand the most safe and unsafe time of the hour.\n\n::: {.cell}\n\n```{.r .cell-code}\ncrime_perhours <- data %>% \n  group_by(Incident.Hour) %>% \n  summarise(TotalCrime = n()) %>% \n  arrange(Incident.Hour)\nhead(crime_perhours)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Incident.Hour\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"TotalCrime\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"0\",\"2\":\"1588\"},{\"1\":\"1\",\"2\":\"871\"},{\"1\":\"10\",\"2\":\"1563\"},{\"1\":\"11\",\"2\":\"1643\"},{\"1\":\"12\",\"2\":\"2092\"},{\"1\":\"13\",\"2\":\"1676\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(crime_perhours, aes(x = reorder(Incident.Hour, Incident.Hour), y = TotalCrime))+\n  geom_col(fill = \"maroon\")+\n  theme_minimal()+\n  labs(\n    title = \"Crime per hour, San Francisco 2018 - 2022\",\n    x = \"Hours\",\n    y = \"Total Crime\"\n  )\n```\n\n::: {.cell-output-display}\n![](PrachitiParkar_finalproject_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\nWe can observe that maximum crimes occur around 12 in the afternoon, then another spike at midnight. It then gradually decreases from 1 am -7 am in the morning.\n\n#b) Theft time Heatmap\n\nOf the above hourly districution, let us focus on Larcent Theft and plot\nthe heatmap.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_theft_time <- data %>%\n  filter(Incident.Category==\"Larceny Theft\")%>%\n  group_by(Incident.Day.of.Week, Incident.Hour) %>%\n  summarize(count = n())\nhead(df_theft_time)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Incident.Day.of.Week\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Incident.Hour\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"count\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Friday\",\"2\":\"0\",\"3\":\"54\"},{\"1\":\"Friday\",\"2\":\"1\",\"3\":\"14\"},{\"1\":\"Friday\",\"2\":\"10\",\"3\":\"93\"},{\"1\":\"Friday\",\"2\":\"11\",\"3\":\"128\"},{\"1\":\"Friday\",\"2\":\"12\",\"3\":\"116\"},{\"1\":\"Friday\",\"2\":\"13\",\"3\":\"72\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nplot <- ggplot(df_theft_time, aes(x = Incident.Hour, y = Incident.Day.of.Week, fill = count)) +\n  geom_tile() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.6), legend.title = element_blank(), legend.position=\"top\", legend.direction=\"horizontal\", legend.key.width=unit(2, \"cm\"), legend.key.height=unit(0.25, \"cm\"), legend.margin=unit(-0.5,\"cm\"), panel.margin=element_blank()) +\n  labs(x = \"Hour of Theft (Local Time)\", y = \"Day of Week of Theft\", title = \"Number of Thefts in San Francisco from 2018 – 2022, by Time of Theft\") +\n  scale_fill_gradient(low = \"white\", high = \"orange\")\nplot\n```\n\n::: {.cell-output-display}\n![](PrachitiParkar_finalproject_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\nWe can see that most crimes occur during 10 - 19 hours. The crime rate does not depend on the day since almost all days show a similar crime rate.\n\n#Q4: Crime hotspots\n\nLet's get a clearer picture of the most crimes using the San Francisco map.\n\n#a) Map of San Francisco\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggmap)\n\nsf = get_stamenmap(bbox = c(left = -122.5164, bottom = 37.7066, right = -122.3554, top = 37.8103), \nmaptype = c(\"toner-lite\"), zoom = 13)\n\nmap = ggmap(sf)\nmap\n```\n\n::: {.cell-output-display}\n![](PrachitiParkar_finalproject_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n#b) Plotting the first 500 random points on the map\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmap + geom_point(data = sample_n(data, 500), aes(x = Longitude, y = Latitude))\n```\n\n::: {.cell-output-display}\n![](PrachitiParkar_finalproject_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\nWe can already observe a clustering towards the city center.\n\n#c) Density Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmap + \nstat_density2d( data = sample_frac(data, 0.2), aes(x = Longitude, y = Latitude, fill = ..level.., alpha = ..level..), size = 1, bins = 50, geom = 'polygon') +\nscale_fill_gradient('Crime\\nDensity', low = 'green', high = 'orange') +\nscale_alpha(range = c(.2, .3), guide = FALSE) +\nguides(fill = guide_colorbar(barwidth = 1.5, barheight = 10))\n```\n\n::: {.cell-output-display}\n![](PrachitiParkar_finalproject_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\nWe can see that most of the crimes occur in the north east part of the city especially near the Sacramento Street.\n\n#Q5: Count of crimes across months\n\nLet's try to understand if the crime rate has any relationship with the crime counts. \n\n::: {.cell}\n\n```{.r .cell-code}\ndata %>%\n  ggplot(aes(Incident.Month)) + geom_bar()+\n  labs(title = \"Count of crimes across Months in 2023\")\n```\n\n::: {.cell-output-display}\n![](PrachitiParkar_finalproject_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\nWe can see that all months have similar crime counts. \n\n## Part 8. Conclusion\nIn conclusion, the analysis of crime in San Francisco provided valuable insights. The district-wise distribution of crime highlighted unsafe and safe areas, informing targeted interventions. Understanding the most frequent resolution in different districts identified effective strategies. Identifying top crimes and their occurrence times helps enhance security measures. Mapping crime hotspots assists in focusing resources. Examining crime frequency across months enables understanding seasonal variations and correlation with external factors. Overall, these insights support evidence-based decision-making and create safer communities in San Francisco.\n",
    "supporting": [
      "PrachitiParkar_finalproject_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}