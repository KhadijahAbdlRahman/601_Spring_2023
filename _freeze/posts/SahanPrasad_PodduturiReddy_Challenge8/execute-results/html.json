{
  "hash": "a581f776dfaf2f87cd521c5ec44eb621",
  "result": {
    "markdown": "---\ntitle: \"Join Tables and Analyzing Data\"\nauthor: \"Sahan Prasad Podduturi Reddy\"\ndescription: \"Joining Data\"\ndate: \"05/14/2023\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_8\n  - snl\n  - Sahan Prasad Podduturi Reddy\n---\n\n\n## Introduction\n\nI was trying to analyze the `snl_actors` and `snl_casts` datasets in order to find out the approximate screen time for male and female SNL actors. We first start by importing the necessary libraries and setting the working directory to point to the location where the spreadsheet is located. Then we read in both the datasets into dataframes. From the `snl_casts` dataset, we approximate the screen_time for every actor by multiplying the number of episodes the actor appreared in with the season_fraction.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\nsetwd(\"D:/MyDocs/Class Slides/DACSS601/601_Spring_2023/posts/_data\")\nactors <- read.csv(\"snl_actors.csv\")\ncasts <- read.csv(\"snl_casts.csv\") %>%\n  select(-\"first_epid\", -\"last_epid\") %>%\n  mutate(screen_time = n_episodes * season_fraction)\n```\n:::\n\n\n## Join Data\n\nOur actors dataframe has information about actor gender. We create `join_one` by combining both `actors` and `casts` dataframes with an inner join grouping by actor id - `aid` and summarizing to get total screen time per actor in terms of episodes. We know that `actors` has a separate row of information for every cast member and guest on snl, while `casts` contains rows of information for actors only. Performing inner join based on `aid` will match rows based on `aid` which guests do not have. Therefore, to perform a sanity check of our join results, we can print number of rows in `casts` and number of rows in `join_one` and they must be the same. Afterwards, we get `join_two` which contains a separate row for every different actor in `join_one`. Here, we are getting a separate row for every aid by summing the screen times for actors. Thus we can perform a sanity check once again by making sure the length of `join_two` is the same as the number of unique actors ids in `join_one`. \n\n\n::: {.cell}\n\n```{.r .cell-code}\njoin_one <- casts %>% \n  inner_join(actors, by = \"aid\") %>%\n  select(-\"update_anchor\", -\"n_episodes\", -\"url\", -\"season_fraction\", -\"featured\", -\"type\")\nhead(casts)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n               aid sid featured update_anchor n_episodes season_fraction\n1 A. Whitney Brown  11     True         False          8       0.4444444\n2 A. Whitney Brown  12     True         False         20       1.0000000\n3 A. Whitney Brown  13     True         False         13       1.0000000\n4 A. Whitney Brown  14     True         False         20       1.0000000\n5 A. Whitney Brown  15     True         False         20       1.0000000\n6 A. Whitney Brown  16     True         False         20       1.0000000\n  screen_time\n1    3.555556\n2   20.000000\n3   13.000000\n4   20.000000\n5   20.000000\n6   20.000000\n```\n:::\n\n```{.r .cell-code}\nhead(join_one)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n               aid sid screen_time gender\n1 A. Whitney Brown  11    3.555556   male\n2 A. Whitney Brown  12   20.000000   male\n3 A. Whitney Brown  13   13.000000   male\n4 A. Whitney Brown  14   20.000000   male\n5 A. Whitney Brown  15   20.000000   male\n6 A. Whitney Brown  16   20.000000   male\n```\n:::\n\n```{.r .cell-code}\nprint(nrow(casts))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 614\n```\n:::\n\n```{.r .cell-code}\nprint(nrow(join_one))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 614\n```\n:::\n\n```{.r .cell-code}\njoin_two <- join_one %>% group_by(aid, gender) %>%\n  summarise(total_screen_time = sum(screen_time))\nhead(join_two)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 Ã— 3\n# Groups:   aid [6]\n  aid              gender total_screen_time\n  <chr>            <chr>              <dbl>\n1 A. Whitney Brown male               96.6 \n2 Abby Elliott     female             76.2 \n3 Adam Sandler     male               84.0 \n4 Aidy Bryant      female            182   \n5 Al Franken       male              192.  \n6 Alan Zweibel     male                1.25\n```\n:::\n\n```{.r .cell-code}\nprint(length(unique(join_one$aid)))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 156\n```\n:::\n\n```{.r .cell-code}\nprint(nrow(join_two))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 156\n```\n:::\n:::\n\n\n## Visualization and Analysis\n\nWe can visualize the resulting dataframe comparing actor's screen time and coloring them based on gender to give a good picture of average screen time for male and female snl stars.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\njoin_two %>% \n    ggplot(aes(y=total_screen_time, x=aid, color=gender)) +\n    geom_point() +\n    theme_bw() +\n    theme(axis.text.x = element_text(angle = 90, hjust = 1, margin = margin(t = 0.5, unit = \"cm\"), size = 8)) +\n    scale_x_discrete(breaks = join_two$aid[seq(1, length(join_two$aid), by = 3)]) +\n    labs(title = \"Actor's Screen Time Comparision\", x = \"Actor\", y = \"Approx. No. of Episodes of Screen Time\")\n```\n\n::: {.cell-output-display}\n![](SahanPrasad_PodduturiReddy_Challenge8_files/figure-html/Visualize-1.png){width=672}\n:::\n:::",
    "supporting": [
      "SahanPrasad_PodduturiReddy_Challenge8_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}