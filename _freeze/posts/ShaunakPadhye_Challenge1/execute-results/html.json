{
  "hash": "e1419b95eba2e8df2aa3e069603c7c0f",
  "result": {
    "markdown": "---\ntitle: \"Challenge 1 - Rail roads\"\nauthor: \"Shaunak Padhye\"\ndesription: \"Data Reading and Data Cleaning\"\ndate: \"05/11/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_1\n  - Shaunak Padhye\n  - railroads\n---\n\n\n## Setup\n\nWe will load the required packages.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\n\nknitr::opts_chunk$set(echo = TRUE)\n```\n:::\n\n\n## Reading in data files\n\nThe \"StateCounty2012.xls\" dataset will be used for this challenge. The dataset will be loaded using the read_excel() function from the readxl package. When the data was first loaded, it was observed that the first two rows did not contain useful information and hence those two rows were skipped.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstate_county <- read_excel(\"_data/StateCounty2012.xls\", skip=2)\nstate_county <- data.frame(state_county)\nhead(state_county)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      STATE ...2               COUNTY ...4 TOTAL\n1        AE   NA                  APO   NA     2\n2 AE Total1   NA                 <NA>   NA     2\n3        AK   NA            ANCHORAGE   NA     7\n4        AK   NA FAIRBANKS NORTH STAR   NA     2\n5        AK   NA               JUNEAU   NA     3\n6        AK   NA    MATANUSKA-SUSITNA   NA     2\n```\n:::\n:::\n\n\nWe can also observe that the second and the fourth columns contain null values and those columns can be dropped.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstate_county <- state_county[, -c(2,4)]\nhead(state_county)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      STATE               COUNTY TOTAL\n1        AE                  APO     2\n2 AE Total1                 <NA>     2\n3        AK            ANCHORAGE     7\n4        AK FAIRBANKS NORTH STAR     2\n5        AK               JUNEAU     3\n6        AK    MATANUSKA-SUSITNA     2\n```\n:::\n:::\n\n## Data Description\n\nThis dataset provides information on the number of railroad employees in each county and state for the year 2012. Each row represents a county, and the columns display the state, county, and number of employees. There is no information about the origin of the data.\n\n## Data Cleaning\n\nNow our dataset is ready for further inspection. We can start by creating an initial summary of the data by using the summary() and str() functions. These functions provide some basic statistics for the dataset.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(state_county)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    STATE              COUNTY              TOTAL         \n Length:2990        Length:2990        Min.   :     1.0  \n Class :character   Class :character   1st Qu.:     7.0  \n Mode  :character   Mode  :character   Median :    22.0  \n                                       Mean   :   256.9  \n                                       3rd Qu.:    71.0  \n                                       Max.   :255432.0  \n                                       NA's   :5         \n```\n:::\n\n```{.r .cell-code}\nstr(state_county)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n'data.frame':\t2990 obs. of  3 variables:\n $ STATE : chr  \"AE\" \"AE Total1\" \"AK\" \"AK\" ...\n $ COUNTY: chr  \"APO\" NA \"ANCHORAGE\" \"FAIRBANKS NORTH STAR\" ...\n $ TOTAL : num  2 2 7 2 3 2 1 88 103 102 ...\n```\n:::\n:::\n\n\nWe can observe that the STATE column has 2990 values. However, the number of states in the United States is much less. We can print out the unique values for this column to check.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(state_county$STATE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  [1] \"AE\"                                                 \n  [2] \"AE Total1\"                                          \n  [3] \"AK\"                                                 \n  [4] \"AK Total\"                                           \n  [5] \"AL\"                                                 \n  [6] \"AL Total\"                                           \n  [7] \"AP\"                                                 \n  [8] \"AP Total1\"                                          \n  [9] \"AR\"                                                 \n [10] \"AR Total\"                                           \n [11] \"AZ\"                                                 \n [12] \"AZ Total\"                                           \n [13] \"CA\"                                                 \n [14] \"CA Total\"                                           \n [15] \"CO\"                                                 \n [16] \"CO Total\"                                           \n [17] \"CT\"                                                 \n [18] \"CT Total\"                                           \n [19] \"DC\"                                                 \n [20] \"DC Total\"                                           \n [21] \"DE\"                                                 \n [22] \"DE Total\"                                           \n [23] \"FL\"                                                 \n [24] \"FL Total\"                                           \n [25] \"GA\"                                                 \n [26] \"GA Total\"                                           \n [27] \"HI\"                                                 \n [28] \"HI Total\"                                           \n [29] \"IA\"                                                 \n [30] \"IA Total\"                                           \n [31] \"ID\"                                                 \n [32] \"ID Total\"                                           \n [33] \"IL\"                                                 \n [34] \"IL Total\"                                           \n [35] \"IN\"                                                 \n [36] \"IN Total\"                                           \n [37] \"KS\"                                                 \n [38] \"KS Total\"                                           \n [39] \"KY\"                                                 \n [40] \"KY Total\"                                           \n [41] \"LA\"                                                 \n [42] \"LA Total\"                                           \n [43] \"MA\"                                                 \n [44] \"MA Total\"                                           \n [45] \"MD\"                                                 \n [46] \"MD Total\"                                           \n [47] \"ME\"                                                 \n [48] \"ME Total\"                                           \n [49] \"MI\"                                                 \n [50] \"MI Total\"                                           \n [51] \"MN\"                                                 \n [52] \"MN Total\"                                           \n [53] \"MO\"                                                 \n [54] \"MO Total\"                                           \n [55] \"MS\"                                                 \n [56] \"MS Total\"                                           \n [57] \"MT\"                                                 \n [58] \"MT Total\"                                           \n [59] \"NC\"                                                 \n [60] \"NC Total\"                                           \n [61] \"ND\"                                                 \n [62] \"ND Total\"                                           \n [63] \"NE\"                                                 \n [64] \"NE Total\"                                           \n [65] \"NH\"                                                 \n [66] \"NH Total\"                                           \n [67] \"NJ\"                                                 \n [68] \"NJ Total\"                                           \n [69] \"NM\"                                                 \n [70] \"NM Total\"                                           \n [71] \"NV\"                                                 \n [72] \"NV Total\"                                           \n [73] \"NY\"                                                 \n [74] \"NY Total\"                                           \n [75] \"OH\"                                                 \n [76] \"OH Total\"                                           \n [77] \"OK\"                                                 \n [78] \"OK Total\"                                           \n [79] \"OR\"                                                 \n [80] \"OR Total\"                                           \n [81] \"PA\"                                                 \n [82] \"PA Total\"                                           \n [83] \"RI\"                                                 \n [84] \"RI Total\"                                           \n [85] \"SC\"                                                 \n [86] \"SC Total\"                                           \n [87] \"SD\"                                                 \n [88] \"SD Total\"                                           \n [89] \"TN\"                                                 \n [90] \"TN Total\"                                           \n [91] \"TX\"                                                 \n [92] \"TX Total\"                                           \n [93] \"UT\"                                                 \n [94] \"UT Total\"                                           \n [95] \"VA\"                                                 \n [96] \"VA Total\"                                           \n [97] \"VT\"                                                 \n [98] \"VT Total\"                                           \n [99] \"WA\"                                                 \n[100] \"WA Total\"                                           \n[101] \"WI\"                                                 \n[102] \"WI Total\"                                           \n[103] \"WV\"                                                 \n[104] \"WV Total\"                                           \n[105] \"WY\"                                                 \n[106] \"WY Total\"                                           \n[107] \"Grand Total\"                                        \n[108] NA                                                   \n[109] \"CANADA\"                                             \n[110] \"1  Military designation.\"                           \n[111] \"NOTE:  Excludes 2,896 employees without an address.\"\n```\n:::\n:::\n\n\nTo understand this dataset in more detail lets isolate the state \"MA\" and check the dataset.\n\n::: {.cell}\n\n```{.r .cell-code}\nsubset(state_county, STATE == \"MA\", select = c(COUNTY,TOTAL))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         COUNTY TOTAL\n1137 BARNSTABLE    44\n1138  BERKSHIRE    50\n1139    BRISTOL   232\n1140      ESSEX   314\n1141   FRANKLIN   113\n1142    HAMPDEN   202\n1143  HAMPSHIRE    68\n1144  MIDDLESEX   673\n1145    NORFOLK   386\n1146   PLYMOUTH   429\n1147    SUFFOLK   558\n1148  WORCESTER   310\n```\n:::\n:::\n\nAs we can see above, the dataset contains the total for each county in \"MA\".\n\nWe can also see the total number of emoloyees in \"MA\" by checking the \"MA Total\" state.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsubset(state_county, STATE == \"MA Total\", select = c(COUNTY,TOTAL))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     COUNTY TOTAL\n1149   <NA>  3379\n```\n:::\n:::\n\nBased on this we understand that this dataset contains the total number of employees for each county in each state as well as the total number of employees for each state. We can split the dataset into two. One dataframe will contain the values for the states and their counties, while one dataframe will contain values for the entire states.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmatch_pattern <- grepl(\"Total\",state_county$STATE)\n\nstate_total <- state_county[match_pattern, ]\nstate_total\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n           STATE COUNTY  TOTAL\n2      AE Total1   <NA>      2\n9       AK Total   <NA>    103\n77      AL Total   <NA>   4257\n79     AP Total1   <NA>      1\n152     AR Total   <NA>   3871\n168     AZ Total   <NA>   3153\n224     CA Total   <NA>  13137\n282     CO Total   <NA>   3650\n291     CT Total   <NA>   2592\n293     DC Total   <NA>    279\n297     DE Total   <NA>   1495\n365     FL Total   <NA>   7419\n518     GA Total   <NA>   8605\n522     HI Total   <NA>      4\n622     IA Total   <NA>   4019\n659     ID Total   <NA>   1563\n763     IL Total   <NA>  19131\n856     IN Total   <NA>   8537\n952     KS Total   <NA>   6092\n1072    KY Total   <NA>   4811\n1136    LA Total   <NA>   3915\n1149    MA Total   <NA>   3379\n1174    MD Total   <NA>   4709\n1191    ME Total   <NA>    654\n1270    MI Total   <NA>   3932\n1357    MN Total   <NA>   5467\n1473    MO Total   <NA>   8419\n1552    MS Total   <NA>   2111\n1606    MT Total   <NA>   3327\n1701    NC Total   <NA>   3143\n1751    ND Total   <NA>   2204\n1841    NE Total   <NA>  13176\n1852    NH Total   <NA>    393\n1874    NJ Total   <NA>   8329\n1904    NM Total   <NA>   1958\n1917    NV Total   <NA>    746\n1979    NY Total   <NA>  17050\n2068    OH Total   <NA>   9056\n2142    OK Total   <NA>   2318\n2176    OR Total   <NA>   2322\n2242    PA Total   <NA>  12769\n2248    RI Total   <NA>    487\n2295    SC Total   <NA>   2296\n2348    SD Total   <NA>    949\n2440    TN Total   <NA>   4952\n2662    TX Total   <NA>  19839\n2688    UT Total   <NA>   1917\n2781    VA Total   <NA>   7551\n2796    VT Total   <NA>    259\n2836    WA Total   <NA>   5222\n2906    WI Total   <NA>   3773\n2960    WV Total   <NA>   3213\n2983    WY Total   <NA>   2876\n2984 Grand Total   <NA> 255432\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nstate_county <- state_county[!match_pattern, ]\nhead(state_county)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  STATE               COUNTY TOTAL\n1    AE                  APO     2\n3    AK            ANCHORAGE     7\n4    AK FAIRBANKS NORTH STAR     2\n5    AK               JUNEAU     3\n6    AK    MATANUSKA-SUSITNA     2\n7    AK                SITKA     1\n```\n:::\n:::\n\n\nFinally, we remove all the null values from both the datasets.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstate_total <- na.omit(state_total)\nstate_county <- na.omit(state_county)\n```\n:::\n\n\n## Summary\n\nWe end up with two datasets:\n1) One dataset contains the total number of employees for each county in each state\n2) One dataset contains the total number of employees for each state",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}