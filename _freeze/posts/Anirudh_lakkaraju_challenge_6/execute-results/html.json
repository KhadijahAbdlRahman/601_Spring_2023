{
  "hash": "d7e7f93275d3369b90be79e15a34c463",
  "result": {
    "markdown": "---\ntitle: \"Challenge 6\"\nauthor: \"Anirudh Lakkaraju\"\ndescription: \"Visualizing Time and Relationships\"\ndate: \"05/14/2023\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_6\n  - hotel_bookings\n  - Anirudh Lakkaraju\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Read in data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- read.csv(\"_data/hotel_bookings.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         hotel is_canceled lead_time arrival_date_year arrival_date_month\n1 Resort Hotel           0       342              2015               July\n2 Resort Hotel           0       737              2015               July\n3 Resort Hotel           0         7              2015               July\n4 Resort Hotel           0        13              2015               July\n5 Resort Hotel           0        14              2015               July\n6 Resort Hotel           0        14              2015               July\n  arrival_date_week_number arrival_date_day_of_month stays_in_weekend_nights\n1                       27                         1                       0\n2                       27                         1                       0\n3                       27                         1                       0\n4                       27                         1                       0\n5                       27                         1                       0\n6                       27                         1                       0\n  stays_in_week_nights adults children babies meal country market_segment\n1                    0      2        0      0   BB     PRT         Direct\n2                    0      2        0      0   BB     PRT         Direct\n3                    1      1        0      0   BB     GBR         Direct\n4                    1      1        0      0   BB     GBR      Corporate\n5                    2      2        0      0   BB     GBR      Online TA\n6                    2      2        0      0   BB     GBR      Online TA\n  distribution_channel is_repeated_guest previous_cancellations\n1               Direct                 0                      0\n2               Direct                 0                      0\n3               Direct                 0                      0\n4            Corporate                 0                      0\n5                TA/TO                 0                      0\n6                TA/TO                 0                      0\n  previous_bookings_not_canceled reserved_room_type assigned_room_type\n1                              0                  C                  C\n2                              0                  C                  C\n3                              0                  A                  C\n4                              0                  A                  A\n5                              0                  A                  A\n6                              0                  A                  A\n  booking_changes deposit_type agent company days_in_waiting_list customer_type\n1               3   No Deposit  NULL    NULL                    0     Transient\n2               4   No Deposit  NULL    NULL                    0     Transient\n3               0   No Deposit  NULL    NULL                    0     Transient\n4               0   No Deposit   304    NULL                    0     Transient\n5               0   No Deposit   240    NULL                    0     Transient\n6               0   No Deposit   240    NULL                    0     Transient\n  adr required_car_parking_spaces total_of_special_requests reservation_status\n1   0                           0                         0          Check-Out\n2   0                           0                         0          Check-Out\n3  75                           0                         0          Check-Out\n4  75                           0                         0          Check-Out\n5  98                           0                         1          Check-Out\n6  98                           0                         1          Check-Out\n  reservation_status_date\n1              2015-07-01\n2              2015-07-01\n3              2015-07-02\n4              2015-07-02\n5              2015-07-03\n6              2015-07-03\n```\n:::\n:::\n\n\n### Briefly describe the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 119390     32\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"hotel\"                          \"is_canceled\"                   \n [3] \"lead_time\"                      \"arrival_date_year\"             \n [5] \"arrival_date_month\"             \"arrival_date_week_number\"      \n [7] \"arrival_date_day_of_month\"      \"stays_in_weekend_nights\"       \n [9] \"stays_in_week_nights\"           \"adults\"                        \n[11] \"children\"                       \"babies\"                        \n[13] \"meal\"                           \"country\"                       \n[15] \"market_segment\"                 \"distribution_channel\"          \n[17] \"is_repeated_guest\"              \"previous_cancellations\"        \n[19] \"previous_bookings_not_canceled\" \"reserved_room_type\"            \n[21] \"assigned_room_type\"             \"booking_changes\"               \n[23] \"deposit_type\"                   \"agent\"                         \n[25] \"company\"                        \"days_in_waiting_list\"          \n[27] \"customer_type\"                  \"adr\"                           \n[29] \"required_car_parking_spaces\"    \"total_of_special_requests\"     \n[31] \"reservation_status\"             \"reservation_status_date\"       \n```\n:::\n:::\n\n\n## Tidy Data (as needed)\n\nI would like to create a plot that displays the trend of reservations for each month. To achieve this, we must first create a new column in the dataset called \"arrival-year-month\".\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- df %>% \n  mutate(date_year = paste0(arrival_date_month,\" \",arrival_date_day_of_month,\" \",arrival_date_year))\ndf$date_year %>% head()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"July 1 2015\" \"July 1 2015\" \"July 1 2015\" \"July 1 2015\" \"July 1 2015\"\n[6] \"July 1 2015\"\n```\n:::\n:::\n\n\n## Time Dependent Visualization\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  filter(arrival_date_year == 2015) %>%\n  group_by(arrival_date_month, hotel) %>%\n  summarise(total_bookings = n()) %>%\n  ggplot(aes(x = arrival_date_month, y = total_bookings, fill = hotel)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(x = \"Month\", y = \"Total Bookings\", title = \"Monthly bookings by hotel\") +\n  scale_fill_manual(values = c(\"#4e79a7\", \"#f28e2c\"), \n                    name = \"Hotel\", \n                    labels = c(\"City Hotel\", \"Resort Hotel\"))\n```\n\n::: {.cell-output-display}\n![](Anirudh_lakkaraju_challenge_6_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n## Visualizing Part-Whole Relationships\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrouped <- df %>% \n  select(arrival_date_month,days_in_waiting_list) %>% \n  group_by(arrival_date_month) %>% \n  summarise_all(max) %>% \n  mutate(month=as.Date(paste(arrival_date_month,\"-01-2021\",sep=\"\"),\"%B-%d-%Y\"))\ngrouped %>% ggplot(aes(month,days_in_waiting_list))+geom_line() +scale_x_date(date_labels = \"%B\",date_breaks = \"1 month\")+ labs(title=\"max days in waiting list per month\")\n```\n\n::: {.cell-output-display}\n![](Anirudh_lakkaraju_challenge_6_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "Anirudh_lakkaraju_challenge_6_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}