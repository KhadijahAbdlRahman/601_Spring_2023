{
  "hash": "ae62e27de6565a3631b37dc34b9c22a9",
  "result": {
    "markdown": "---\ntitle: \"Challenge 2 - FAO_Stat\"\nauthor: \"Joseph Vincent\"\ndescription: \"Data wrangling: using group() and summarise()\"\ndate: \"03/03/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_2\n  - faostat\n  - Joseph Vincent\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(summarytools)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Reading in and cleaning up the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# reading in FAO stat, dairy cattle and assigning to FAO_Dairy\nFAO_Dairy <- read.csv(\"_data/FAOSTAT_cattle_dairy.csv\")\n\n# removing unchanging and duplicate variables\n# assigning to FAO_Dairy_Clean\nFAO_Dairy_Clean <- FAO_Dairy %>%\n  select('Area', 'Element', 'Year', 'Unit', 'Value', 'Flag', 'Flag.Description')\n\nhead(FAO_Dairy_Clean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         Area      Element Year   Unit  Value Flag Flag.Description\n1 Afghanistan Milk Animals 1961   Head 700000    F     FAO estimate\n2 Afghanistan        Yield 1961  hg/An   5000   Fc  Calculated data\n3 Afghanistan   Production 1961 tonnes 350000    F     FAO estimate\n4 Afghanistan Milk Animals 1962   Head 700000    F     FAO estimate\n5 Afghanistan        Yield 1962  hg/An   5000   Fc  Calculated data\n6 Afghanistan   Production 1962 tonnes 350000    F     FAO estimate\n```\n:::\n:::\n\n\n## Describe the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# summarizing the original data set, viewing year and area in tables\ndfSummary(FAO_Dairy_Clean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nData Frame Summary  \nFAO_Dairy_Clean  \nDimensions: 36449 x 7  \nDuplicates: 0  \n\n---------------------------------------------------------------------------------------------------------------------------\nNo   Variable           Stats / Values                   Freqs (% of Valid)      Graph                 Valid      Missing  \n---- ------------------ -------------------------------- ----------------------- --------------------- ---------- ---------\n1    Area               1. Afghanistan                     174 ( 0.5%)                                 36449      0        \n     [character]        2. Africa                          174 ( 0.5%)                                 (100.0%)   (0.0%)   \n                        3. Albania                         174 ( 0.5%)                                                     \n                        4. Algeria                         174 ( 0.5%)                                                     \n                        5. American Samoa                  174 ( 0.5%)                                                     \n                        6. Americas                        174 ( 0.5%)                                                     \n                        7. Angola                          174 ( 0.5%)                                                     \n                        8. Antigua and Barbuda             174 ( 0.5%)                                                     \n                        9. Argentina                       174 ( 0.5%)                                                     \n                        10. Asia                           174 ( 0.5%)                                                     \n                        [ 222 others ]                   34709 (95.2%)           IIIIIIIIIIIIIIIIIII                       \n\n2    Element            1. Milk Animals                  12158 (33.4%)           IIIIII                36449      0        \n     [character]        2. Production                    12170 (33.4%)           IIIIII                (100.0%)   (0.0%)   \n                        3. Yield                         12121 (33.3%)           IIIIII                                    \n\n3    Year               Mean (sd) : 1990.4 (16.8)        58 distinct values      . . .   . :   : : :   36449      0        \n     [integer]          min < med < max:                                         : : : . : : : : : :   (100.0%)   (0.0%)   \n                        1961 < 1991 < 2018                                       : : : : : : : : : :                       \n                        IQR (CV) : 29 (0)                                        : : : : : : : : : :                       \n                                                                                 : : : : : : : : : :                       \n\n4    Unit               1. Head                          12158 (33.4%)           IIIIII                36449      0        \n     [character]        2. hg/An                         12121 (33.3%)           IIIIII                (100.0%)   (0.0%)   \n                        3. tonnes                        12170 (33.4%)           IIIIII                                    \n\n5    Value              Mean (sd) : 4410235 (25744621)   24088 distinct values   :                     36375      74       \n     [integer]          min < med < max:                                         :                     (99.8%)    (0.2%)   \n                        7 < 43266 < 683217055                                    :                                         \n                        IQR (CV) : 692151 (5.8)                                  :                                         \n                                                                                 :                                         \n\n6    Flag               1. (Empty string)                10044 (27.6%)           IIIII                 36449      0        \n     [character]        2. *                               810 ( 2.2%)                                 (100.0%)   (0.0%)   \n                        3. A                              3070 ( 8.4%)           I                                         \n                        4. F                              7045 (19.3%)           III                                       \n                        5. Fc                            13136 (36.0%)           IIIIIII                                   \n                        6. Im                             2270 ( 6.2%)           I                                         \n                        7. M                                74 ( 0.2%)                                                     \n\n7    Flag.Description   1. Aggregate, may include of      3070 ( 8.4%)           I                     36449      0        \n     [character]        2. Calculated data               13136 (36.0%)           IIIIIII               (100.0%)   (0.0%)   \n                        3. Data not available               74 ( 0.2%)                                                     \n                        4. FAO data based on imputat      2270 ( 6.2%)           I                                         \n                        5. FAO estimate                   7045 (19.3%)           III                                       \n                        6. Official data                 10044 (27.6%)           IIIII                                     \n                        7. Unofficial figure               810 ( 2.2%)                                                     \n---------------------------------------------------------------------------------------------------------------------------\n```\n:::\n\n```{.r .cell-code}\n# finding count of distinct Areas and Area Years\ncount(distinct(FAO_Dairy_Clean, Area))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    n\n1 232\n```\n:::\n\n```{.r .cell-code}\ncount(distinct(FAO_Dairy_Clean, Area, Year))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      n\n1 12170\n```\n:::\n\n```{.r .cell-code}\n# finding distinct Flags and showing that Aggregate counts are for continents/regions other than countries\ndistinct(FAO_Dairy_Clean, Flag)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  Flag\n1    F\n2   Fc\n3     \n4    *\n5   Im\n6    M\n7    A\n```\n:::\n\n```{.r .cell-code}\nhead(filter(FAO_Dairy_Clean, Flag == \"A\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Area      Element Year   Unit     Value Flag\n1 World Milk Animals 1961   Head 177334557    A\n2 World   Production 1961 tonnes 313626619    A\n3 World Milk Animals 1962   Head 176572244    A\n4 World   Production 1962 tonnes 316043684    A\n5 World Milk Animals 1963   Head 177117785    A\n6 World   Production 1963 tonnes 312824366    A\n                                                              Flag.Description\n1 Aggregate, may include official, semi-official, estimated or calculated data\n2 Aggregate, may include official, semi-official, estimated or calculated data\n3 Aggregate, may include official, semi-official, estimated or calculated data\n4 Aggregate, may include official, semi-official, estimated or calculated data\n5 Aggregate, may include official, semi-official, estimated or calculated data\n6 Aggregate, may include official, semi-official, estimated or calculated data\n```\n:::\n:::\n\nThis data set describes dairy production from 1961 to 2018 - specifically, whole milk production - by region.\n\nDairy production is quantified in three different ways: total milk production in tons, number of cows, and yield per cow.\n\nThere are 232  unique regions. These are mostly countries, but also include some broader regions like continents. These are flagged as aggregates in the data.\n\nAltogether, there are 12170 unique Area-Years.\n\n# Provide Grouped Summary Statistics\n## Production By Continent\n\n\n::: {.cell}\n\n```{.r .cell-code}\nFAO_Dairy_Clean %>%\n  filter(Area %in% c(\"Africa\", \"Europe\", \"Americas\", \"Asia\")) %>%\n  group_by(Area, Element) %>%\n  summarize(Mean = mean(Value, na.rm = TRUE),\n            Median = median(Value, na.rm = TRUE)) %>% \n  pivot_wider(names_from = Element, values_from = c(Mean, Median))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 7\n# Groups:   Area [4]\n  Area     `Mean_Milk Animals` Mean_Production Mean_Yi…¹ Media…² Media…³ Media…⁴\n  <chr>                  <dbl>           <dbl>     <dbl>   <dbl>   <dbl>   <dbl>\n1 Africa             37629052.       18949137.     4869.  3.32e7  1.51e7   4600 \n2 Americas           44335479.      123817831.    27492.  4.51e7  1.16e8  25327 \n3 Asia               64033326.       80628670.    11052.  5.66e7  5.55e7   9794 \n4 Europe             68487680.      228904979.    36916.  8.26e7  2.20e8  33152.\n# … with abbreviated variable names ¹​Mean_Yield, ²​`Median_Milk Animals`,\n#   ³​Median_Production, ⁴​Median_Yield\n```\n:::\n:::\n\n\nI have focused above on just the aggregated continents in the data set in order to do a comparison at the same region level. The data was grouped by continents and element, and the mean and median values of Animals, Production, and Yield were calculated for each continent over the entire time period.\n\nAs you can see, the number of dairy cows in Asia and Europe has been much greater on average. \n\nHowever, it is notable that average production was more than 2x higher in Europe compared to Asia, suggesting that each cow is yielding much less milk in Asia.\n\nFurthermore, the Americas have produced on average about 40 million more tons of milk than Asia despite have having fewer cows.\n\n## Comparing production in two different continents over time\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# How did production increase over time in Asia vs Europe\n\n# creating a table with unique observations for each area-year\nFAO_Dairy_Plot <- FAO_Dairy %>%\n  select('Area', 'Element', 'Year', 'Value') %>%\n  pivot_wider(names_from = 'Element', values_from = 'Value')\n\n# creating table of asian production\nAsiaproduction <- FAO_Dairy_Plot %>%\n  select('Area', 'Year', 'Production') %>%\n  filter(Area == \"Asia\")\n\n# graphing asian milk production from 1961-2018\nggplot(data = Asiaproduction) +\n  geom_line(mapping = aes(x = Year, y = Production))\n```\n\n::: {.cell-output-display}\n![](JosephVincent_challenge2_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# creating table of European production\nEuropeproduction <- FAO_Dairy_Plot %>%\n  select('Area', 'Year', 'Production') %>%\n  filter(Area == \"Europe\")\n\n# graphing European milk production from 1961-2018\nggplot(data = Europeproduction) +\n  geom_line(mapping = aes(x = Year, y = Production))\n```\n\n::: {.cell-output-display}\n![](JosephVincent_challenge2_files/figure-html/unnamed-chunk-5-2.png){width=672}\n:::\n:::\n\n\n## Asia vs Europe\nNext, I wanted to graph milk production of Asia and Europe to see how their milk production has trended over time.\nWhen we graph the results, it's clear that the average values did not tell the whole story.\nAsia has had an steady exponential growth in milk production over time.\nEurope had steady growth in milk production from the early sixties until about 1990, when milk production plunged. This has only recovered slightly in recent years.\n",
    "supporting": [
      "JosephVincent_challenge2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}