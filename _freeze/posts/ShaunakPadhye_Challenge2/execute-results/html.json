{
  "hash": "298496ac209dc91d6e5716893750097c",
  "result": {
    "markdown": "---\ntitle: \"Challenge 2\"\nauthor: \"Shaunak Padhye\"\ndescription: \"Data wrangling: using group() and summarise()\"\ndate: \"05/12/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_2\n  - Shaunak Padhye\n  - faostat\n---\n\n\n## Setup\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nlibrary(tidyverse)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n\n## Read in the Data\n\nFor this challenge I will be using the birds.csv dataset.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbirds <- read_csv(\"_data/birds.csv\")\nhead(birds)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 14\n  `Domain Code` Domain      `Area Code` Area  `Element Code` Element `Item Code`\n  <chr>         <chr>             <dbl> <chr>          <dbl> <chr>         <dbl>\n1 QA            Live Anima…           2 Afgh…           5112 Stocks         1057\n2 QA            Live Anima…           2 Afgh…           5112 Stocks         1057\n3 QA            Live Anima…           2 Afgh…           5112 Stocks         1057\n4 QA            Live Anima…           2 Afgh…           5112 Stocks         1057\n5 QA            Live Anima…           2 Afgh…           5112 Stocks         1057\n6 QA            Live Anima…           2 Afgh…           5112 Stocks         1057\n# ℹ 7 more variables: Item <chr>, `Year Code` <dbl>, Year <dbl>, Unit <chr>,\n#   Value <dbl>, Flag <chr>, `Flag Description` <chr>\n```\n:::\n:::\n\n\nLets print out the Column names to check which columns we are interested in.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(birds)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"Domain Code\"      \"Domain\"           \"Area Code\"        \"Area\"            \n [5] \"Element Code\"     \"Element\"          \"Item Code\"        \"Item\"            \n [9] \"Year Code\"        \"Year\"             \"Unit\"             \"Value\"           \n[13] \"Flag\"             \"Flag Description\"\n```\n:::\n:::\n\nAll the Columns that contain \"Code\" in them can be removed as we have the normal columns as well. For example, since we have the \"Area\" column, we can remove the \"Area Code\" column.\n\nNow, lets go through the unique values of certain columns to see if we need them.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(birds$`Flag Description`)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"FAO estimate\"                                                                \n[2] \"Official data\"                                                               \n[3] \"FAO data based on imputation methodology\"                                    \n[4] \"Data not available\"                                                          \n[5] \"Unofficial figure\"                                                           \n[6] \"Aggregate, may include official, semi-official, estimated or calculated data\"\n```\n:::\n:::\n\nThe \"Flag Description\" and \"Flag\" columns give us information about the manner of data collection and the authenticity of the data and can be removed for our analysis.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(birds$Unit)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"1000 Head\"\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(birds$Domain)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Live Animals\"\n```\n:::\n:::\n\nThe \"Unit\" and \"Domain\" columns contain only one unique value and hence can be removed.\n\nNow we will take a subset of the data with only the columns that we require and perform our analysis.\n\n::: {.cell}\n\n```{.r .cell-code}\nbirds_subset <- birds[c( \"Area\", \"Element\", \"Item\", \"Year\", \"Value\")]\nhead(birds_subset)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 5\n  Area        Element Item      Year Value\n  <chr>       <chr>   <chr>    <dbl> <dbl>\n1 Afghanistan Stocks  Chickens  1961  4700\n2 Afghanistan Stocks  Chickens  1962  4900\n3 Afghanistan Stocks  Chickens  1963  5000\n4 Afghanistan Stocks  Chickens  1964  5300\n5 Afghanistan Stocks  Chickens  1965  5500\n6 Afghanistan Stocks  Chickens  1966  5800\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbirds_subset <- na.omit(birds_subset)\n```\n:::\n\n\n\n## Describe the data\n\nBy looking at the data we can infer that it is about the stock of various poultry birds for major Areas in the world, for each year. Lets take an example of a row in the data set:\n\n::: {.cell}\n\n```{.r .cell-code}\nbirds_subset[1,]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 5\n  Area        Element Item      Year Value\n  <chr>       <chr>   <chr>    <dbl> <dbl>\n1 Afghanistan Stocks  Chickens  1961  4700\n```\n:::\n:::\n\nThis shows that, for the year 1961, the stock of poultry Chickens in Afghanistan was 4700.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(birds_subset)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     Area             Element              Item                Year     \n Length:29941       Length:29941       Length:29941       Min.   :1961  \n Class :character   Class :character   Class :character   1st Qu.:1976  \n Mode  :character   Mode  :character   Mode  :character   Median :1992  \n                                                          Mean   :1991  \n                                                          3rd Qu.:2005  \n                                                          Max.   :2018  \n     Value         \n Min.   :       0  \n 1st Qu.:     171  \n Median :    1800  \n Mean   :   99411  \n 3rd Qu.:   15404  \n Max.   :23707134  \n```\n:::\n:::\n\nFrom the above summary we see that the range of years in this data set goes from 1961 to 2018.\n\nWe will now check the unique values for the other columns:\nAreas:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlength(unique(birds_subset$Area))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 248\n```\n:::\n:::\n\nItems:\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(birds_subset$Item)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Chickens\"               \"Ducks\"                  \"Geese and guinea fowls\"\n[4] \"Turkeys\"                \"Pigeons, other birds\"  \n```\n:::\n:::\n\n\n\n## Grouped Summary Statistics\n\n### Analysis of Items\n\nWe will first group the data by Items to see which Poultry Item has been more popular. We will sort it by descending order\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbirds_subset%>%\n  group_by(Item)%>%\n  summarise(Avg_stocks = mean(Value))%>%\n  arrange(desc(Avg_stocks))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n  Item                   Avg_stocks\n  <chr>                       <dbl>\n1 Chickens                  207931.\n2 Ducks                      23072.\n3 Turkeys                    15228.\n4 Geese and guinea fowls     10292.\n5 Pigeons, other birds        6163.\n```\n:::\n:::\n\nWe can see that Chickens have been the most popular Poultry Item across the world as its stock is significantly higher than the other items. The sum of the stocks of all other items is also less than the stock for Chickens.\n\n### Analysis of Areas\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbirds_subset%>%\n  filter(Year==2010)%>%\n  group_by(Area)%>%\n  summarise(Total_stocks = sum(Value))%>%\n  arrange(desc(Total_stocks))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 238 × 2\n   Area               Total_stocks\n   <chr>                     <dbl>\n 1 World                  22311214\n 2 Asia                   12535841\n 3 Eastern Asia            6906604\n 4 China, mainland         6312000\n 5 Americas                5635098\n 6 South-eastern Asia      2570583\n 7 Northern America        2379199\n 8 South America           2299071\n 9 Europe                  2265162\n10 Southern Asia           2222019\n# ℹ 228 more rows\n```\n:::\n:::\n\nHere, we can see that the larger continental areas, have a larger stock. This makes sense as the aggregate population of a continent will be greater than that of a country and will have higher consumption.\n\n**Asia** has the highest poultry consumption. This could be due to the high population density in Asia which adds to the higher consumption.\n\n**United States of America** is the country with the highest poultry consumption, while **Falkland Islands (Malvinas)** has the lowest consumption.\n\n### Analysis by decade\n\nWe can see the trends of poultry as we go through various decades.\n\n::: {.cell}\n\n```{.r .cell-code}\nbirds_subset %>%\n  mutate(Decade = 10 * floor(Year / 10)) %>%\n  group_by(Item,Decade) %>%\n  summarise(Avg_stocks = mean(Value),\n            Median_stocks = median(Value),\n            Standard_Deviation = sd(Value))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 30 × 5\n# Groups:   Item [5]\n   Item     Decade Avg_stocks Median_stocks Standard_Deviation\n   <chr>     <dbl>      <dbl>         <dbl>              <dbl>\n 1 Chickens   1960     83286.         4745             360089.\n 2 Chickens   1970    111927.         7000             481532.\n 3 Chickens   1980    162130.         9200             703217.\n 4 Chickens   1990    216889.        12000            1007193.\n 5 Chickens   2000    287001.        15375            1375191.\n 6 Chickens   2010    361437.        18719            1732596.\n 7 Ducks      1960      8323.          372.             31291.\n 8 Ducks      1970     11006.          430.             42341.\n 9 Ducks      1980     16187.          560.             63333.\n10 Ducks      1990     26600.          485             113131.\n# ℹ 20 more rows\n```\n:::\n:::\n\nHere we observe that for each Item, the consumption has gradually increased over the decades. The increase in standard deviation tells us that a few countries are consuming a large chunk of the poultry in the World",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}