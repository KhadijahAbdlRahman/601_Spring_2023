{
  "hash": "098e866f04f7b29bd3851bbe7a0a58c8",
  "result": {
    "markdown": "---\ntitle: \"Challenge 2\"\nauthor: \"Teresa Lardo\"\ndescription: \"Grouping a dataset on hotel bookings and providing summary statistics\"\ndate: \"02/22/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_2\n  - Teresa Lardo\n  - hotel_bookings\neditor: \n  markdown: \n    wrap: 72\n---\n\n\n## Read in the Data\n\nFor this challenge, I'll read in the csv file on hotel bookings.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.1     ✔ purrr   1.0.1\n✔ tibble  3.1.8     ✔ dplyr   1.1.0\n✔ tidyr   1.3.0     ✔ stringr 1.5.0\n✔ readr   2.1.3     ✔ forcats 1.0.0\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\nlibrary(readr)\nhotel_bookings <- read_csv(\"_data/hotel_bookings.csv\", show_col_types = FALSE)\n```\n:::\n\n#### First 6 Rows\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(hotel_bookings)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 32\n  hotel   is_ca…¹ lead_…² arriv…³ arriv…⁴ arriv…⁵ arriv…⁶ stays…⁷ stays…⁸ adults\n  <chr>     <dbl>   <dbl>   <dbl> <chr>     <dbl>   <dbl>   <dbl>   <dbl>  <dbl>\n1 Resort…       0     342    2015 July         27       1       0       0      2\n2 Resort…       0     737    2015 July         27       1       0       0      2\n3 Resort…       0       7    2015 July         27       1       0       1      1\n4 Resort…       0      13    2015 July         27       1       0       1      1\n5 Resort…       0      14    2015 July         27       1       0       2      2\n6 Resort…       0      14    2015 July         27       1       0       2      2\n# … with 22 more variables: children <dbl>, babies <dbl>, meal <chr>,\n#   country <chr>, market_segment <chr>, distribution_channel <chr>,\n#   is_repeated_guest <dbl>, previous_cancellations <dbl>,\n#   previous_bookings_not_canceled <dbl>, reserved_room_type <chr>,\n#   assigned_room_type <chr>, booking_changes <dbl>, deposit_type <chr>,\n#   agent <chr>, company <chr>, days_in_waiting_list <dbl>,\n#   customer_type <chr>, adr <dbl>, required_car_parking_spaces <dbl>, …\n```\n:::\n:::\n\n\n#### Last 6 Rows\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntail(hotel_bookings)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 32\n  hotel   is_ca…¹ lead_…² arriv…³ arriv…⁴ arriv…⁵ arriv…⁶ stays…⁷ stays…⁸ adults\n  <chr>     <dbl>   <dbl>   <dbl> <chr>     <dbl>   <dbl>   <dbl>   <dbl>  <dbl>\n1 City H…       0      21    2017 August       35      30       2       5      2\n2 City H…       0      23    2017 August       35      30       2       5      2\n3 City H…       0     102    2017 August       35      31       2       5      3\n4 City H…       0      34    2017 August       35      31       2       5      2\n5 City H…       0     109    2017 August       35      31       2       5      2\n6 City H…       0     205    2017 August       35      29       2       7      2\n# … with 22 more variables: children <dbl>, babies <dbl>, meal <chr>,\n#   country <chr>, market_segment <chr>, distribution_channel <chr>,\n#   is_repeated_guest <dbl>, previous_cancellations <dbl>,\n#   previous_bookings_not_canceled <dbl>, reserved_room_type <chr>,\n#   assigned_room_type <chr>, booking_changes <dbl>, deposit_type <chr>,\n#   agent <chr>, company <chr>, days_in_waiting_list <dbl>,\n#   customer_type <chr>, adr <dbl>, required_car_parking_spaces <dbl>, …\n```\n:::\n:::\n\n\n\n## Describe the data\n\n#### Dimensions\n\n::: {.cell}\n\n```{.r .cell-code}\n#Find out the dimensions of the tibble\ndim(hotel_bookings)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 119390     32\n```\n:::\n:::\n\n\n#### Unique Hotels\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Find out which hotels are listed in the hotel column\nunique(hotel_bookings$hotel)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Resort Hotel\" \"City Hotel\"  \n```\n:::\n:::\n\n\n\nThe cases in this dataset are just under 120,000 individual bookings at two hotels\n(Resort Hotel and City Hotel) over the time period July 2015 through\nAugust 2017. There are 32 variables in this dataset, including:\n\n\\- meal packages,\n\n\\- how far in advance the booking was created (lead time),\n\n\\- average daily rate,\n\n\\- whether a booking was canceled or not,\n\n\\- type of room reserved/assigned, and\n\n\\- how many adults, children, and babies are associated with each\nbooking.\n\nBecause each variable ought to have a column, we can look at all the\nvariables in this dataset by using the `colnames()` function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(hotel_bookings)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"hotel\"                          \"is_canceled\"                   \n [3] \"lead_time\"                      \"arrival_date_year\"             \n [5] \"arrival_date_month\"             \"arrival_date_week_number\"      \n [7] \"arrival_date_day_of_month\"      \"stays_in_weekend_nights\"       \n [9] \"stays_in_week_nights\"           \"adults\"                        \n[11] \"children\"                       \"babies\"                        \n[13] \"meal\"                           \"country\"                       \n[15] \"market_segment\"                 \"distribution_channel\"          \n[17] \"is_repeated_guest\"              \"previous_cancellations\"        \n[19] \"previous_bookings_not_canceled\" \"reserved_room_type\"            \n[21] \"assigned_room_type\"             \"booking_changes\"               \n[23] \"deposit_type\"                   \"agent\"                         \n[25] \"company\"                        \"days_in_waiting_list\"          \n[27] \"customer_type\"                  \"adr\"                           \n[29] \"required_car_parking_spaces\"    \"total_of_special_requests\"     \n[31] \"reservation_status\"             \"reservation_status_date\"       \n```\n:::\n:::\n\n\nThe \"is_canceled\" and \"reservation_status\" columns clue us in to the\nfact that the cases are bookings *made* but not necessarily actual \n*stays* at the hotels, as some customers canceled or no-showed. This\nindicates that the data was most likely gathered from the booking\nsystems of the hotels themselves.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Show unique values under is_canceled column\nunique(hotel_bookings$is_canceled)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0 1\n```\n:::\n\n```{.r .cell-code}\n# Show unique values under reservation_status column\nunique(hotel_bookings$reservation_status)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Check-Out\" \"Canceled\"  \"No-Show\"  \n```\n:::\n:::\n\n\n\n## Grouped Summary Statistics\n\nBecause this dataset has so many variables, there are many potential\nways to group data. We could group our data by hotel, by bookings that\nturned into actual *hotel stays* (where reservation_status is 'Check-Out'), by bookings that include children or\nbabies (where the children or babies column is not '0'), by group\nbookings (where market_segment is 'groups'), by bookings with a full\ndeposit (where deposit_type is 'Non Refund'), by bookings for which the\nreserved and assign room types differ (where reserved_room_type is not\nthe same as the value in assigned_room_type), by bookings with different\ntypes of meal packages, etc.\n\n### When are the hotels in demand?\n\nLet's look at average lead time (number of days between booking and\nanticipated arrival date) to get clues into when during the year each\nhotel is more likely to be booked far in advanced. Let's also filter out bookings that were cancelled. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nhotel_bookings %>%\n  filter(reservation_status == \"Check-Out\") %>%\n  group_by(arrival_date_month, hotel) %>%\n  select(lead_time) %>%\n  summarize_all(mean) %>%\n  ungroup() %>%\n  arrange(desc(lead_time))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 24 × 3\n   arrival_date_month hotel        lead_time\n   <chr>              <chr>            <dbl>\n 1 September          Resort Hotel     146. \n 2 July               City Hotel       133. \n 3 June               Resort Hotel     126. \n 4 May                Resort Hotel     107. \n 5 June               City Hotel       103. \n 6 October            Resort Hotel     103. \n 7 August             City Hotel       101. \n 8 July               Resort Hotel      96.2\n 9 August             Resort Hotel      92.8\n10 May                City Hotel        90.0\n# … with 14 more rows\n```\n:::\n:::\n\n\nReservations for September at Resort Hotel have the highest average lead\ntime, with July reservations at City Hotel following behind. The lowest average lead times for City Hotel are in January, February, and Dcember. The lowest average lead times for Resort Hotel are in November, February, and January.\n\n## Central Tendency and Dispersion\n\nDespite the 32 different variables in this dataset, only 13 columns can\nbe directly used to get means, medians, and modes. Other columns may\nappear to be numeric but answer Yes/No questions with 0 or 1, or list\nnumbers referring to dates (such as week of the year or day of the\nmonth), which would not benefit from being averaged.\n\n### Hotel Stays\n\nI will filter for bookings that actually turned into hotel stays (where\nthe reservation status is \"Check-Out\" as opposed to \"No show\" or\n\"Canceled\").\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Create a vector containing the indices of the columns for summary statistics\nstat_cols <- c(3, 8:12, 18, 19, 22, 26, 28:30)\n\n#Load summarytools package to us descr()\nlibrary(summarytools)\n\nhotel_stays <- hotel_bookings %>% \n  filter(reservation_status == \"Check-Out\")\n\ndescr(hotel_stays[stat_cols])\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nDescriptive Statistics  \nhotel_stays  \nN: 75166  \n\n                         adr     adults     babies   booking_changes   children\n----------------- ---------- ---------- ---------- ----------------- ----------\n             Mean      99.99       1.83       0.01              0.29       0.10\n          Std.Dev      49.21       0.51       0.11              0.74       0.39\n              Min      -6.38       0.00       0.00              0.00       0.00\n               Q1      67.50       2.00       0.00              0.00       0.00\n           Median      92.50       2.00       0.00              0.00       0.00\n               Q3     125.00       2.00       0.00              0.00       0.00\n              Max     510.00       4.00      10.00             21.00       3.00\n              MAD      40.77       0.00       0.00              0.00       0.00\n              IQR      57.50       0.00       0.00              0.00       0.00\n               CV       0.49       0.28      10.89              2.51       3.82\n         Skewness       0.96      -0.39      23.40              5.40       4.05\n      SE.Skewness       0.01       0.01       0.01              0.01       0.01\n         Kurtosis       2.04       0.86    1416.23             66.61      16.20\n          N.Valid   75166.00   75166.00   75166.00          75166.00   75166.00\n        Pct.Valid     100.00     100.00     100.00            100.00     100.00\n\nTable: Table continues below\n\n \n\n                    days_in_waiting_list   lead_time   previous_bookings_not_canceled\n----------------- ---------------------- ----------- --------------------------------\n             Mean                   1.59       79.98                             0.20\n          Std.Dev                  14.78       91.11                             1.81\n              Min                   0.00        0.00                             0.00\n               Q1                   0.00        9.00                             0.00\n           Median                   0.00       45.00                             0.00\n               Q3                   0.00      124.00                             0.00\n              Max                 379.00      737.00                            72.00\n              MAD                   0.00       62.27                             0.00\n              IQR                   0.00      115.00                             0.00\n               CV                   9.30        1.14                             8.92\n         Skewness                  12.60        1.53                            19.60\n      SE.Skewness                   0.01        0.01                             0.01\n         Kurtosis                 192.72        2.29                           534.16\n          N.Valid               75166.00    75166.00                         75166.00\n        Pct.Valid                 100.00      100.00                           100.00\n\nTable: Table continues below\n\n \n\n                    previous_cancellations   required_car_parking_spaces   stays_in_week_nights\n----------------- ------------------------ ----------------------------- ----------------------\n             Mean                     0.02                          0.10                   2.46\n          Std.Dev                     0.27                          0.30                   1.92\n              Min                     0.00                          0.00                   0.00\n               Q1                     0.00                          0.00                   1.00\n           Median                     0.00                          0.00                   2.00\n               Q3                     0.00                          0.00                   3.00\n              Max                    13.00                          8.00                  50.00\n              MAD                     0.00                          0.00                   1.48\n              IQR                     0.00                          0.00                   2.00\n               CV                    17.25                          3.05                   0.78\n         Skewness                    29.14                          3.14                   2.75\n      SE.Skewness                     0.01                          0.01                   0.01\n         Kurtosis                  1043.46                         17.84                  25.61\n          N.Valid                 75166.00                      75166.00               75166.00\n        Pct.Valid                   100.00                        100.00                 100.00\n\nTable: Table continues below\n\n \n\n                    stays_in_weekend_nights   total_of_special_requests\n----------------- ------------------------- ---------------------------\n             Mean                      0.93                        0.71\n          Std.Dev                      0.99                        0.83\n              Min                      0.00                        0.00\n               Q1                      0.00                        0.00\n           Median                      1.00                        1.00\n               Q3                      2.00                        1.00\n              Max                     19.00                        5.00\n              MAD                      1.48                        1.48\n              IQR                      2.00                        1.00\n               CV                      1.07                        1.17\n         Skewness                      1.40                        1.08\n      SE.Skewness                      0.01                        0.01\n         Kurtosis                      8.36                        0.90\n          N.Valid                  75166.00                    75166.00\n        Pct.Valid                    100.00                      100.00\n```\n:::\n:::\n\n\n\n\n### Cancelled Bookings\n\nTo contrast with the summary statistics of the bookings that turned into\nhotel stays, let's filter for only *cancelled* bookings at the two\nhotels.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncanceled_bookings <- hotel_bookings %>%\n  filter(is_canceled == 1) \n\ndescr(canceled_bookings[stat_cols])\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nDescriptive Statistics  \ncanceled_bookings  \nN: 44224  \n\n                         adr     adults     babies   booking_changes   children\n----------------- ---------- ---------- ---------- ----------------- ----------\n             Mean     104.96       1.90       0.00              0.10       0.11\n          Std.Dev      52.57       0.68       0.06              0.45       0.41\n              Min       0.00       0.00       0.00              0.00       0.00\n               Q1      72.41       2.00       0.00              0.00       0.00\n           Median      96.20       2.00       0.00              0.00       0.00\n               Q3     127.62       2.00       0.00              0.00       0.00\n              Max    5400.00      55.00       2.00             16.00      10.00\n              MAD      40.22       0.00       0.00              0.00       0.00\n              IQR      55.21       0.00       0.00              0.00       0.00\n               CV       0.50       0.36      16.34              4.59       3.86\n         Skewness      23.89      31.03      16.64              7.75       4.19\n      SE.Skewness       0.01       0.01       0.01              0.01       0.01\n         Kurtosis    2327.31    1935.19     286.17            111.72      21.95\n          N.Valid   44224.00   44224.00   44224.00          44224.00   44220.00\n        Pct.Valid     100.00     100.00     100.00            100.00      99.99\n\nTable: Table continues below\n\n \n\n                    days_in_waiting_list   lead_time   previous_bookings_not_canceled\n----------------- ---------------------- ----------- --------------------------------\n             Mean                   3.56      144.85                             0.03\n          Std.Dev                  21.49      118.62                             0.68\n              Min                   0.00        0.00                             0.00\n               Q1                   0.00       48.00                             0.00\n           Median                   0.00      113.00                             0.00\n               Q3                   0.00      214.00                             0.00\n              Max                 391.00      629.00                            58.00\n              MAD                   0.00      111.19                             0.00\n              IQR                   0.00      166.00                             0.00\n               CV                   6.03        0.82                            27.03\n         Skewness                  10.64        1.03                            46.75\n      SE.Skewness                   0.01        0.01                             0.01\n         Kurtosis                 151.19        0.78                          2794.70\n          N.Valid               44224.00    44224.00                         44224.00\n        Pct.Valid                 100.00      100.00                           100.00\n\nTable: Table continues below\n\n \n\n                    previous_cancellations   required_car_parking_spaces   stays_in_week_nights\n----------------- ------------------------ ----------------------------- ----------------------\n             Mean                     0.21                          0.00                   2.56\n          Std.Dev                     1.33                          0.00                   1.88\n              Min                     0.00                          0.00                   0.00\n               Q1                     0.00                          0.00                   1.00\n           Median                     0.00                          0.00                   2.00\n               Q3                     0.00                          0.00                   3.00\n              Max                    26.00                          0.00                  40.00\n              MAD                     0.00                          0.00                   1.48\n              IQR                     0.00                          0.00                   2.00\n               CV                     6.39                           NaN                   0.73\n         Skewness                    16.12                           NaN                   3.08\n      SE.Skewness                     0.01                          0.01                   0.01\n         Kurtosis                   282.86                           NaN                  21.82\n          N.Valid                 44224.00                      44224.00               44224.00\n        Pct.Valid                   100.00                        100.00                 100.00\n\nTable: Table continues below\n\n \n\n                    stays_in_weekend_nights   total_of_special_requests\n----------------- ------------------------- ---------------------------\n             Mean                      0.93                        0.33\n          Std.Dev                      1.01                        0.65\n              Min                      0.00                        0.00\n               Q1                      0.00                        0.00\n           Median                      1.00                        0.00\n               Q3                      2.00                        0.00\n              Max                     16.00                        5.00\n              MAD                      1.48                        0.00\n              IQR                      2.00                        0.00\n               CV                      1.09                        1.97\n         Skewness                      1.35                        2.06\n      SE.Skewness                      0.01                        0.01\n         Kurtosis                      5.26                        3.93\n          N.Valid                  44224.00                    44224.00\n        Pct.Valid                    100.00                      100.00\n```\n:::\n:::\n\n\n\nI notice the mean & median values for **ADR** is different in the summary stats for hotel stays vs. cancelled bookings. The max ADR value in cancelled bookings is 5400 - possibly a reason that reservation was cancelled. \n\nI also notice that the required car parking spaces variable seems to only have values of zero for the canceled bookings subset. This suggests that information about parking spaces is not collected until the check-in process when customers physically arrive to the hotels. ",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}