{
  "hash": "9b51f3952bf4f8067927806e95b4db81",
  "result": {
    "markdown": "---\ntitle: \"Challenge 6\"\nauthor: \"Jaswanth Reddy Kommuru\"\ndescription: \"Visualizing Time and Relationships\"\ndate: \"05/10/2023\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_6\n  - Jaswanth Reddy Kommuru\n  - hotel_bookings\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in a data set, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  mutate variables as needed (including sanity checks)\n4)  create at least one graph including time (evolution)\n   - try to make them \"publication\" ready (optional)\n   - Explain why you choose the specific graph type\n5)  Create at least one graph depicting part-whole or flow relationships\n   - try to make them \"publication\" ready (optional)\n   - Explain why you choose the specific graph type\n\n[R Graph Gallery](https://r-graph-gallery.com/) is a good starting point for thinking about what information is conveyed in standard graph types, and includes example R code.\n\n(be sure to only include the category tags for the data you use!)\n\n## Read in data\n\nRead in one (or more) of the following datasets, using the correct R package and command.\n\n  - debt  ⭐\n  - fed_rate ⭐⭐\n  - abc_poll ⭐⭐⭐\n  - usa_hh ⭐⭐⭐\n  - hotel_bookings ⭐⭐⭐⭐\n  - AB_NYC ⭐⭐⭐⭐⭐\n\n  \n\n\n::: {.cell}\n\n```{.r .cell-code}\nhotelbookdata <- read.csv(\"~/Documents/601/601_Spring_2023/posts/_data/hotel_bookings.csv\")\n```\n:::\n\n\n### Briefly describe the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(hotelbookdata)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         hotel is_canceled lead_time arrival_date_year arrival_date_month\n1 Resort Hotel           0       342              2015               July\n2 Resort Hotel           0       737              2015               July\n3 Resort Hotel           0         7              2015               July\n4 Resort Hotel           0        13              2015               July\n5 Resort Hotel           0        14              2015               July\n6 Resort Hotel           0        14              2015               July\n  arrival_date_week_number arrival_date_day_of_month stays_in_weekend_nights\n1                       27                         1                       0\n2                       27                         1                       0\n3                       27                         1                       0\n4                       27                         1                       0\n5                       27                         1                       0\n6                       27                         1                       0\n  stays_in_week_nights adults children babies meal country market_segment\n1                    0      2        0      0   BB     PRT         Direct\n2                    0      2        0      0   BB     PRT         Direct\n3                    1      1        0      0   BB     GBR         Direct\n4                    1      1        0      0   BB     GBR      Corporate\n5                    2      2        0      0   BB     GBR      Online TA\n6                    2      2        0      0   BB     GBR      Online TA\n  distribution_channel is_repeated_guest previous_cancellations\n1               Direct                 0                      0\n2               Direct                 0                      0\n3               Direct                 0                      0\n4            Corporate                 0                      0\n5                TA/TO                 0                      0\n6                TA/TO                 0                      0\n  previous_bookings_not_canceled reserved_room_type assigned_room_type\n1                              0                  C                  C\n2                              0                  C                  C\n3                              0                  A                  C\n4                              0                  A                  A\n5                              0                  A                  A\n6                              0                  A                  A\n  booking_changes deposit_type agent company days_in_waiting_list customer_type\n1               3   No Deposit  NULL    NULL                    0     Transient\n2               4   No Deposit  NULL    NULL                    0     Transient\n3               0   No Deposit  NULL    NULL                    0     Transient\n4               0   No Deposit   304    NULL                    0     Transient\n5               0   No Deposit   240    NULL                    0     Transient\n6               0   No Deposit   240    NULL                    0     Transient\n  adr required_car_parking_spaces total_of_special_requests reservation_status\n1   0                           0                         0          Check-Out\n2   0                           0                         0          Check-Out\n3  75                           0                         0          Check-Out\n4  75                           0                         0          Check-Out\n5  98                           0                         1          Check-Out\n6  98                           0                         1          Check-Out\n  reservation_status_date\n1              2015-07-01\n2              2015-07-01\n3              2015-07-02\n4              2015-07-02\n5              2015-07-03\n6              2015-07-03\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(hotelbookdata)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"hotel\"                          \"is_canceled\"                   \n [3] \"lead_time\"                      \"arrival_date_year\"             \n [5] \"arrival_date_month\"             \"arrival_date_week_number\"      \n [7] \"arrival_date_day_of_month\"      \"stays_in_weekend_nights\"       \n [9] \"stays_in_week_nights\"           \"adults\"                        \n[11] \"children\"                       \"babies\"                        \n[13] \"meal\"                           \"country\"                       \n[15] \"market_segment\"                 \"distribution_channel\"          \n[17] \"is_repeated_guest\"              \"previous_cancellations\"        \n[19] \"previous_bookings_not_canceled\" \"reserved_room_type\"            \n[21] \"assigned_room_type\"             \"booking_changes\"               \n[23] \"deposit_type\"                   \"agent\"                         \n[25] \"company\"                        \"days_in_waiting_list\"          \n[27] \"customer_type\"                  \"adr\"                           \n[29] \"required_car_parking_spaces\"    \"total_of_special_requests\"     \n[31] \"reservation_status\"             \"reservation_status_date\"       \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(hotelbookdata)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 119390     32\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(hotelbookdata)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n'data.frame':\t119390 obs. of  32 variables:\n $ hotel                         : chr  \"Resort Hotel\" \"Resort Hotel\" \"Resort Hotel\" \"Resort Hotel\" ...\n $ is_canceled                   : int  0 0 0 0 0 0 0 0 1 1 ...\n $ lead_time                     : int  342 737 7 13 14 14 0 9 85 75 ...\n $ arrival_date_year             : int  2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 ...\n $ arrival_date_month            : chr  \"July\" \"July\" \"July\" \"July\" ...\n $ arrival_date_week_number      : int  27 27 27 27 27 27 27 27 27 27 ...\n $ arrival_date_day_of_month     : int  1 1 1 1 1 1 1 1 1 1 ...\n $ stays_in_weekend_nights       : int  0 0 0 0 0 0 0 0 0 0 ...\n $ stays_in_week_nights          : int  0 0 1 1 2 2 2 2 3 3 ...\n $ adults                        : int  2 2 1 1 2 2 2 2 2 2 ...\n $ children                      : int  0 0 0 0 0 0 0 0 0 0 ...\n $ babies                        : int  0 0 0 0 0 0 0 0 0 0 ...\n $ meal                          : chr  \"BB\" \"BB\" \"BB\" \"BB\" ...\n $ country                       : chr  \"PRT\" \"PRT\" \"GBR\" \"GBR\" ...\n $ market_segment                : chr  \"Direct\" \"Direct\" \"Direct\" \"Corporate\" ...\n $ distribution_channel          : chr  \"Direct\" \"Direct\" \"Direct\" \"Corporate\" ...\n $ is_repeated_guest             : int  0 0 0 0 0 0 0 0 0 0 ...\n $ previous_cancellations        : int  0 0 0 0 0 0 0 0 0 0 ...\n $ previous_bookings_not_canceled: int  0 0 0 0 0 0 0 0 0 0 ...\n $ reserved_room_type            : chr  \"C\" \"C\" \"A\" \"A\" ...\n $ assigned_room_type            : chr  \"C\" \"C\" \"C\" \"A\" ...\n $ booking_changes               : int  3 4 0 0 0 0 0 0 0 0 ...\n $ deposit_type                  : chr  \"No Deposit\" \"No Deposit\" \"No Deposit\" \"No Deposit\" ...\n $ agent                         : chr  \"NULL\" \"NULL\" \"NULL\" \"304\" ...\n $ company                       : chr  \"NULL\" \"NULL\" \"NULL\" \"NULL\" ...\n $ days_in_waiting_list          : int  0 0 0 0 0 0 0 0 0 0 ...\n $ customer_type                 : chr  \"Transient\" \"Transient\" \"Transient\" \"Transient\" ...\n $ adr                           : num  0 0 75 75 98 ...\n $ required_car_parking_spaces   : int  0 0 0 0 0 0 0 0 0 0 ...\n $ total_of_special_requests     : int  0 0 0 0 1 1 0 1 1 0 ...\n $ reservation_status            : chr  \"Check-Out\" \"Check-Out\" \"Check-Out\" \"Check-Out\" ...\n $ reservation_status_date       : chr  \"2015-07-01\" \"2015-07-01\" \"2015-07-02\" \"2015-07-02\" ...\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhotelbookdata %>% \n  select(country) %>% \n  distinct()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    country\n1       PRT\n2       GBR\n3       USA\n4       ESP\n5       IRL\n6       FRA\n7      NULL\n8       ROU\n9       NOR\n10      OMN\n11      ARG\n12      POL\n13      DEU\n14      BEL\n15      CHE\n16       CN\n17      GRC\n18      ITA\n19      NLD\n20      DNK\n21      RUS\n22      SWE\n23      AUS\n24      EST\n25      CZE\n26      BRA\n27      FIN\n28      MOZ\n29      BWA\n30      LUX\n31      SVN\n32      ALB\n33      IND\n34      CHN\n35      MEX\n36      MAR\n37      UKR\n38      SMR\n39      LVA\n40      PRI\n41      SRB\n42      CHL\n43      AUT\n44      BLR\n45      LTU\n46      TUR\n47      ZAF\n48      AGO\n49      ISR\n50      CYM\n51      ZMB\n52      CPV\n53      ZWE\n54      DZA\n55      KOR\n56      CRI\n57      HUN\n58      ARE\n59      TUN\n60      JAM\n61      HRV\n62      HKG\n63      IRN\n64      GEO\n65      AND\n66      GIB\n67      URY\n68      JEY\n69      CAF\n70      CYP\n71      COL\n72      GGY\n73      KWT\n74      NGA\n75      MDV\n76      VEN\n77      SVK\n78      FJI\n79      KAZ\n80      PAK\n81      IDN\n82      LBN\n83      PHL\n84      SEN\n85      SYC\n86      AZE\n87      BHR\n88      NZL\n89      THA\n90      DOM\n91      MKD\n92      MYS\n93      ARM\n94      JPN\n95      LKA\n96      CUB\n97      CMR\n98      BIH\n99      MUS\n100     COM\n101     SUR\n102     UGA\n103     BGR\n104     CIV\n105     JOR\n106     SYR\n107     SGP\n108     BDI\n109     SAU\n110     VNM\n111     PLW\n112     QAT\n113     EGY\n114     PER\n115     MLT\n116     MWI\n117     ECU\n118     MDG\n119     ISL\n120     UZB\n121     NPL\n122     BHS\n123     MAC\n124     TGO\n125     TWN\n126     DJI\n127     STP\n128     KNA\n129     ETH\n130     IRQ\n131     HND\n132     RWA\n133     KHM\n134     MCO\n135     BGD\n136     IMN\n137     TJK\n138     NIC\n139     BEN\n140     VGB\n141     TZA\n142     GAB\n143     GHA\n144     TMP\n145     GLP\n146     KEN\n147     LIE\n148     GNB\n149     MNE\n150     UMI\n151     MYT\n152     FRO\n153     MMR\n154     PAN\n155     BFA\n156     LBY\n157     MLI\n158     NAM\n159     BOL\n160     PRY\n161     BRB\n162     ABW\n163     AIA\n164     SLV\n165     DMA\n166     PYF\n167     GUY\n168     LCA\n169     ATA\n170     GTM\n171     ASM\n172     MRT\n173     NCL\n174     KIR\n175     SDN\n176     ATF\n177     SLE\n178     LAO\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhotelbookdata %>% \n  select(country) %>% \n  n_distinct()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 178\n```\n:::\n:::\n\n\n\n\n\n\n\n\n## Tidy Data (as needed)\n\nIs your data already tidy, or is there work to be done? Be sure to anticipate your end result to provide a sanity check, and document your work here.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmutated_hotelbookdata <- hotelbookdata %>%\nmutate(arrival_date = paste(arrival_date_month, arrival_date_day_of_month, arrival_date_year, sep = \" \"))\n\nhead(bookings$arrival_date)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in head(bookings$arrival_date): object 'bookings' not found\n```\n:::\n:::\n\n\nAre there any variables that require mutation to be usable in your analysis stream? For example, do you need to calculate new values in order to graph them? Can string values be represented numerically? Do you need to turn any variables into factors and reorder for ease of graphics and visualization?\n\nDocument your work here.\n\n\n::: {.cell}\n\n:::\n\n\n## Time Dependent Visualization\n\n\n::: {.cell}\n\n```{.r .cell-code}\nresort_reservations <- mutated_hotelbookdata %>%\nfilter(reservation_status == \"Check-Out\", hotel == \"Resort Hotel\") %>%\nselect(arrival_date)\n\nresort_reservations <- resort_reservations %>%\nmutate(reservation_count = 1) %>%\ngroup_by(arrival_date) %>%\nsummarise(reservation_count = sum(reservation_count)) %>%\nmutate(full_date = as.Date(arrival_date, format = \"%B %d %Y\"))\n\nggplot(resort_reservations,aes(x = full_date, y = reservation_count)) +\ngeom_line(color = \"blue\") +\nlabs(title = \"Resort Hotel Reservation Trend\") +\nylab(\"Number of reservations\") +\nxlab(\"Date\")\n```\n\n::: {.cell-output-display}\n![](JaswanthReddyKommuru_Challenge6_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n\n## Visualizing Part-Whole Relationships\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_grouped <- mutated_hotelbookdata %>%\nselect(arrival_date_month, days_in_waiting_list) %>%\ngroup_by(arrival_date_month) %>%\nsummarise(max_waiting_days = max(days_in_waiting_list)) %>%\nmutate(month = as.Date(paste(arrival_date_month, \"-01-2021\", sep = \"\"), \"%B-%d-%Y\"))\n\n\nggplot(data_grouped,aes(month, max_waiting_days)) +\ngeom_line() +\ngeom_line(color = \"blue\") +\nscale_x_date(date_labels = \"%B\", date_breaks = \"1 month\") +\nlabs(title = \"Maximum Waiting List Duration per Month days\")\n```\n\n::: {.cell-output-display}\n![](JaswanthReddyKommuru_Challenge6_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "JaswanthReddyKommuru_Challenge6_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}