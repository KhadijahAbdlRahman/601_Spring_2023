{
  "hash": "29aa7ef3b47628a49e665a09f21d1968",
  "result": {
    "markdown": "---\ntitle: \"Challenge 7 Instructions\"\nauthor: \"Linda Humphrey\"\ndescription: \"Visualizing Multiple Dimensions\"\ndate: \"04/17/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_7: faostat\n  - Name: Linda Humphrey\n  - data: FAOSTAT_livestock.csv\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(ggplot2)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Read in data\n\n   FAOSTAT_livestock\n\n### Briefly describe the data\n\nThe FAOSTAT_livestock.csv dataset is a comprehensive source of information on livestock production and trade, sourced from the FAO. The dataset includes data on various types of livestock, including cattle, sheep, goats, pigs, poultry, and other animals. For each type of livestock, the data includes information on production quantities, trade volumes, and population sizes, as well as related indicators such as feed consumption and meat yield.\n\nThe data is organized by country and year, with information spanning several decades in some cases. The dataset also includes aggregate data for regions and the world as a whole.\n\n## Read data\n\n::: {.cell}\n\n```{.r .cell-code}\n#Load data \nFAOSTAT_livestock <- read.csv(\"~/Desktop/601_Spring_2023/posts/_data/FAOSTAT_livestock.csv\")\nhead(FAOSTAT_livestock)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  Domain.Code       Domain Area.Code        Area Element.Code Element Item.Code\n1          QA Live Animals         2 Afghanistan         5111  Stocks      1107\n2          QA Live Animals         2 Afghanistan         5111  Stocks      1107\n3          QA Live Animals         2 Afghanistan         5111  Stocks      1107\n4          QA Live Animals         2 Afghanistan         5111  Stocks      1107\n5          QA Live Animals         2 Afghanistan         5111  Stocks      1107\n6          QA Live Animals         2 Afghanistan         5111  Stocks      1107\n   Item Year.Code Year Unit   Value Flag Flag.Description\n1 Asses      1961 1961 Head 1300000         Official data\n2 Asses      1962 1962 Head  851850         Official data\n3 Asses      1963 1963 Head 1001112         Official data\n4 Asses      1964 1964 Head 1150000    F     FAO estimate\n5 Asses      1965 1965 Head 1300000         Official data\n6 Asses      1966 1966 Head 1200000         Official data\n```\n:::\n:::\n\n\n## Tidy Data (as needed)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the necessary library\nlibrary(tidyverse)\n\n# Read in the original dataset\ndf <- read_csv(\"~/Desktop/601_Spring_2023/posts/_data/FAOSTAT_livestock.csv\")\n\n# Remove rows with missing values\ndf <- drop_na(df)\n\n# Convert the Value column to numeric\ndf$Value <- as.numeric(df$Value)\n\n# Remove duplicates\ndf <- distinct(df)\n\nhead(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 14\n  `Domain Code` Domain      `Area Code` Area  `Element Code` Element `Item Code`\n  <chr>         <chr>             <dbl> <chr>          <dbl> <chr>         <dbl>\n1 QA            Live Anima…           2 Afgh…           5111 Stocks         1107\n2 QA            Live Anima…           2 Afgh…           5111 Stocks         1107\n3 QA            Live Anima…           2 Afgh…           5111 Stocks         1107\n4 QA            Live Anima…           2 Afgh…           5111 Stocks         1107\n5 QA            Live Anima…           2 Afgh…           5111 Stocks         1107\n6 QA            Live Anima…           2 Afgh…           5111 Stocks         1107\n# ℹ 7 more variables: Item <chr>, `Year Code` <dbl>, Year <dbl>, Unit <chr>,\n#   Value <dbl>, Flag <chr>, `Flag Description` <chr>\n```\n:::\n\n```{.r .cell-code}\ntail(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 14\n  `Domain Code` Domain      `Area Code` Area  `Element Code` Element `Item Code`\n  <chr>         <chr>             <dbl> <chr>          <dbl> <chr>         <dbl>\n1 QA            Live Anima…        5504 Poly…           5111 Stocks          976\n2 QA            Live Anima…        5504 Poly…           5111 Stocks          976\n3 QA            Live Anima…        5504 Poly…           5111 Stocks          976\n4 QA            Live Anima…        5504 Poly…           5111 Stocks          976\n5 QA            Live Anima…        5504 Poly…           5111 Stocks          976\n6 QA            Live Anima…        5504 Poly…           5111 Stocks          976\n# ℹ 7 more variables: Item <chr>, `Year Code` <dbl>, Year <dbl>, Unit <chr>,\n#   Value <dbl>, Flag <chr>, `Flag Description` <chr>\n```\n:::\n\n```{.r .cell-code}\nstr(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [42,545 × 14] (S3: tbl_df/tbl/data.frame)\n $ Domain Code     : chr [1:42545] \"QA\" \"QA\" \"QA\" \"QA\" ...\n $ Domain          : chr [1:42545] \"Live Animals\" \"Live Animals\" \"Live Animals\" \"Live Animals\" ...\n $ Area Code       : num [1:42545] 2 2 2 2 2 2 2 2 2 2 ...\n $ Area            : chr [1:42545] \"Afghanistan\" \"Afghanistan\" \"Afghanistan\" \"Afghanistan\" ...\n $ Element Code    : num [1:42545] 5111 5111 5111 5111 5111 ...\n $ Element         : chr [1:42545] \"Stocks\" \"Stocks\" \"Stocks\" \"Stocks\" ...\n $ Item Code       : num [1:42545] 1107 1107 1107 1107 1107 ...\n $ Item            : chr [1:42545] \"Asses\" \"Asses\" \"Asses\" \"Asses\" ...\n $ Year Code       : num [1:42545] 1964 1973 1974 1975 1976 ...\n $ Year            : num [1:42545] 1964 1973 1974 1975 1976 ...\n $ Unit            : chr [1:42545] \"Head\" \"Head\" \"Head\" \"Head\" ...\n $ Value           : num [1:42545] 1150000 1250000 1250000 1250000 1250000 ...\n $ Flag            : chr [1:42545] \"F\" \"F\" \"F\" \"F\" ...\n $ Flag Description: chr [1:42545] \"FAO estimate\" \"FAO estimate\" \"FAO estimate\" \"FAO estimate\" ...\n```\n:::\n\n```{.r .cell-code}\nsummary(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n Domain Code           Domain            Area Code        Area          \n Length:42545       Length:42545       Min.   :   1   Length:42545      \n Class :character   Class :character   1st Qu.:  89   Class :character  \n Mode  :character   Mode  :character   Median : 175   Mode  :character  \n                                       Mean   :1629                     \n                                       3rd Qu.:5102                     \n                                       Max.   :5504                     \n  Element Code    Element            Item Code        Item          \n Min.   :5111   Length:42545       Min.   : 866   Length:42545      \n 1st Qu.:5111   Class :character   1st Qu.: 976   Class :character  \n Median :5111   Mode  :character   Median :1034   Mode  :character  \n Mean   :5111                      Mean   :1033                     \n 3rd Qu.:5111                      3rd Qu.:1107                     \n Max.   :5111                      Max.   :1126                     \n   Year Code         Year          Unit               Value          \n Min.   :1961   Min.   :1961   Length:42545       Min.   :0.000e+00  \n 1st Qu.:1976   1st Qu.:1976   Class :character   1st Qu.:5.400e+03  \n Median :1991   Median :1991   Mode  :character   Median :8.000e+04  \n Mean   :1991   Mean   :1991                      Mean   :1.763e+07  \n 3rd Qu.:2005   3rd Qu.:2005                      3rd Qu.:1.849e+06  \n Max.   :2018   Max.   :2018                      Max.   :1.490e+09  \n     Flag           Flag Description  \n Length:42545       Length:42545      \n Class :character   Class :character  \n Mode  :character   Mode  :character  \n                                      \n                                      \n                                      \n```\n:::\n:::\n\n\n## Summary per Area and year reflecting Min,Meadian,Mean & Max of all the areas.\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(FAOSTAT_livestock)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n Domain.Code           Domain            Area.Code          Area          \n Length:82116       Length:82116       Min.   :   1.0   Length:82116      \n Class :character   Class :character   1st Qu.:  73.0   Class :character  \n Mode  :character   Mode  :character   Median : 146.0   Mode  :character  \n                                       Mean   : 912.7                     \n                                       3rd Qu.: 221.0                     \n                                       Max.   :5504.0                     \n                                                                          \n  Element.Code    Element            Item.Code        Item          \n Min.   :5111   Length:82116       Min.   : 866   Length:82116      \n 1st Qu.:5111   Class :character   1st Qu.: 976   Class :character  \n Median :5111   Mode  :character   Median :1034   Mode  :character  \n Mean   :5111                      Mean   :1018                     \n 3rd Qu.:5111                      3rd Qu.:1096                     \n Max.   :5111                      Max.   :1126                     \n                                                                    \n   Year.Code         Year          Unit               Value          \n Min.   :1961   Min.   :1961   Length:82116       Min.   :0.000e+00  \n 1st Qu.:1976   1st Qu.:1976   Class :character   1st Qu.:1.250e+04  \n Median :1991   Median :1991   Mode  :character   Median :2.247e+05  \n Mean   :1990   Mean   :1990                      Mean   :1.163e+07  \n 3rd Qu.:2005   3rd Qu.:2005                      3rd Qu.:2.377e+06  \n Max.   :2018   Max.   :2018                      Max.   :1.490e+09  \n                                                  NA's   :1301       \n     Flag           Flag.Description  \n Length:82116       Length:82116      \n Class :character   Class :character  \n Mode  :character   Mode  :character  \n                                      \n                                      \n                                      \n                                      \n```\n:::\n:::\n\n\n## checking the missing values\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(is.na(FAOSTAT_livestock))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1301\n```\n:::\n:::\n\n\n#Checking for duplicate values\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(duplicated(FAOSTAT_livestock))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0\n```\n:::\n:::\n\n# Analyzing data set with filter option\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(lubridate)\nFAOSTAT_livestock <- FAOSTAT_livestock %>%\n  filter(Year == 2015)\n```\n:::\n\n\n# This code reads in the cleaned FAOSTAT_livestock.csv dataset and reorders the data by year, value per capita, country, and item using the arrange() function. The resulting dataset is then saved as a new CSV file named 'FAOSTAT_livestock_reordered.csv'.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the necessary library\nlibrary(tidyverse)\n\n# Read in the cleaned dataset\ndf <- read_csv(\"~/Desktop/601_Spring_2023/posts/_data/FAOSTAT_livestock.csv\")\n\n# Reorder the data by year, value per capita, country, and item\ndf_reordered <- df %>%\n  arrange(Year, Value, Area, Item)\nhead(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 14\n  `Domain Code` Domain      `Area Code` Area  `Element Code` Element `Item Code`\n  <chr>         <chr>             <dbl> <chr>          <dbl> <chr>         <dbl>\n1 QA            Live Anima…           2 Afgh…           5111 Stocks         1107\n2 QA            Live Anima…           2 Afgh…           5111 Stocks         1107\n3 QA            Live Anima…           2 Afgh…           5111 Stocks         1107\n4 QA            Live Anima…           2 Afgh…           5111 Stocks         1107\n5 QA            Live Anima…           2 Afgh…           5111 Stocks         1107\n6 QA            Live Anima…           2 Afgh…           5111 Stocks         1107\n# ℹ 7 more variables: Item <chr>, `Year Code` <dbl>, Year <dbl>, Unit <chr>,\n#   Value <dbl>, Flag <chr>, `Flag Description` <chr>\n```\n:::\n\n```{.r .cell-code}\ntail(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 14\n  `Domain Code` Domain      `Area Code` Area  `Element Code` Element `Item Code`\n  <chr>         <chr>             <dbl> <chr>          <dbl> <chr>         <dbl>\n1 QA            Live Anima…        5504 Poly…           5111 Stocks          976\n2 QA            Live Anima…        5504 Poly…           5111 Stocks          976\n3 QA            Live Anima…        5504 Poly…           5111 Stocks          976\n4 QA            Live Anima…        5504 Poly…           5111 Stocks          976\n5 QA            Live Anima…        5504 Poly…           5111 Stocks          976\n6 QA            Live Anima…        5504 Poly…           5111 Stocks          976\n# ℹ 7 more variables: Item <chr>, `Year Code` <dbl>, Year <dbl>, Unit <chr>,\n#   Value <dbl>, Flag <chr>, `Flag Description` <chr>\n```\n:::\n\n```{.r .cell-code}\nstr(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nspc_tbl_ [82,116 × 14] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n $ Domain Code     : chr [1:82116] \"QA\" \"QA\" \"QA\" \"QA\" ...\n $ Domain          : chr [1:82116] \"Live Animals\" \"Live Animals\" \"Live Animals\" \"Live Animals\" ...\n $ Area Code       : num [1:82116] 2 2 2 2 2 2 2 2 2 2 ...\n $ Area            : chr [1:82116] \"Afghanistan\" \"Afghanistan\" \"Afghanistan\" \"Afghanistan\" ...\n $ Element Code    : num [1:82116] 5111 5111 5111 5111 5111 ...\n $ Element         : chr [1:82116] \"Stocks\" \"Stocks\" \"Stocks\" \"Stocks\" ...\n $ Item Code       : num [1:82116] 1107 1107 1107 1107 1107 ...\n $ Item            : chr [1:82116] \"Asses\" \"Asses\" \"Asses\" \"Asses\" ...\n $ Year Code       : num [1:82116] 1961 1962 1963 1964 1965 ...\n $ Year            : num [1:82116] 1961 1962 1963 1964 1965 ...\n $ Unit            : chr [1:82116] \"Head\" \"Head\" \"Head\" \"Head\" ...\n $ Value           : num [1:82116] 1300000 851850 1001112 1150000 1300000 ...\n $ Flag            : chr [1:82116] NA NA NA \"F\" ...\n $ Flag Description: chr [1:82116] \"Official data\" \"Official data\" \"Official data\" \"FAO estimate\" ...\n - attr(*, \"spec\")=\n  .. cols(\n  ..   `Domain Code` = col_character(),\n  ..   Domain = col_character(),\n  ..   `Area Code` = col_double(),\n  ..   Area = col_character(),\n  ..   `Element Code` = col_double(),\n  ..   Element = col_character(),\n  ..   `Item Code` = col_double(),\n  ..   Item = col_character(),\n  ..   `Year Code` = col_double(),\n  ..   Year = col_double(),\n  ..   Unit = col_character(),\n  ..   Value = col_double(),\n  ..   Flag = col_character(),\n  ..   `Flag Description` = col_character()\n  .. )\n - attr(*, \"problems\")=<externalptr> \n```\n:::\n\n```{.r .cell-code}\n# Save the reordered dataset\nwrite_csv(df_reordered, \"~/Desktop/601_Spring_2023/posts/Tidy_CSV_files/FAOSTAT_livestock_reordered.csv\")\n```\n:::\n\n\n\n# This code reads in the cleaned and grouped FAOSTAT_livestock.csv dataset and creates two new variables using the mutate() function. The first variable, Total_production, calculates the total production quantity by country and year using the sum() function. The second variable, Percentage_of_average, calculates the percentage of production quantity per capita compared to the country's average using the mean() function and rounding to two decimal places with the round() function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a new variable for the total production quantity by country and year\nFAOSTAT_livestock <- FAOSTAT_livestock %>%\n  group_by(Area, Year) %>%\n  mutate(Total_production = sum(Value))\n\n# Create a new variable for the percentage of production quantity per capita compared to the country's average\nFAOSTAT_livestock <- FAOSTAT_livestock %>%\n  group_by(Area, Year) %>%\n  mutate(Percentage_of_average = round(Value / mean(Value) * 100, 2))\n```\n:::\n\n\n# This code reads in the cleaned and grouped FAOSTAT_livestock.csv dataset and converts the Country and Item variables to factors using the factor() function. The fct_reorder() function from the forcats package is then used to reorder the levels of the Item factor based on the Value_per_capita variable. This ensures that the levels are ordered by value, which can make it easier to create visualizations.\n\n::: {.cell}\n\n```{.r .cell-code}\n# Convert the Country and Item variables to factors\nFAOSTAT_livestock$Area <- factor(FAOSTAT_livestock$Area)\nFAOSTAT_livestock$Item <- factor(FAOSTAT_livestock$Item)\n\n# Reorder the factor levels of the Item variable\nFAOSTAT_livestock$Item <- fct_reorder(FAOSTAT_livestock$Item, FAOSTAT_livestock$Value, .na_rm = TRUE)\n\nwrite.csv(FAOSTAT_livestock, \"~/Desktop/601_Spring_2023/posts/Tidy_CSV_files/FAOSTAT_livestock_modified.csv\")\n```\n:::\n\n\n\n## Visualization with Multiple Dimensions\n\nThis code reads in the cleaned and grouped FAOSTAT_livestock.csv dataset and creates a stacked bar chart of the production quantity per capita by country, year, and animal type using ggplot2. The geom_bar() function creates the stacked bars, and facet_wrap() splits the chart into multiple panels based on the Country variable. The labs() function is used to add labels to the axes, legend, and title, and theme_minimal() adjusts the chart's appearance.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the necessary libraries\nlibrary(tidyverse)\nlibrary(ggplot2)\n\n# Create a stacked bar chart of the production quantity per capita by country, year, and animal type\nggplot(FAOSTAT_livestock, aes(x = Year, y = Value, fill = Item)) +\n  geom_bar(stat = \"identity\") +\n  facet_wrap(~Area, ncol = 3) +\n  labs(x = \"Year\", y = \"Production quantity per capita\",\n       fill = \"Animal type\", title = \"Livestock production per capita by country and animal type\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](LindaHumphrey_challenge_7_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n# Distribution number of Items, using filters and line graph.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the necessary libraries\nlibrary(ggplot2)\nlibrary(tidyverse)\nlibrary(hrbrthemes)\nlibrary(plotly)\nlibrary(patchwork)\nlibrary(viridis)\n\n# Read in the cleaned and grouped dataset\nFAOSTAT_livestock <- read.csv(\"~/Desktop/601_Spring_2023/posts/_data/FAOSTAT_livestock.csv\", header = T)\n\n# Create a line graph of the selected filtered Items per year variable\nFAOSTAT_livestock %>%\n  filter(Area %in% c(\"Algeria\", \"Italy\", \"Jamaica\", \"Pakistan\")) %>%\n  ggplot(aes(x=Year, y=Value / sum(1301), group=Item, color=Item))+\n  geom_point() +\n    scale_color_viridis(discrete = TRUE) +\n    ggtitle(\"Value of Item per year\") +\n    ylab(\"Value\") +\n    theme_ipsum()\n```\n\n::: {.cell-output-display}\n![](LindaHumphrey_challenge_7_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "LindaHumphrey_challenge_7_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}